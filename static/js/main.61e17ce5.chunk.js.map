{"version":3,"sources":["services/convnet-min.js","components/Button/Button.tsx","components/Board/context/BoardContext.tsx","components/Board/hooks/useBoard.ts","components/Board/models/Board.ts","components/Grid/Grid.tsx","components/Tile/Tile.tsx","hooks/usePrevProps.ts","components/Board/Board.tsx","components/Tile/models/Tile.ts","components/Game/hooks/useIds.ts","components/Game/hooks/useGame/reducer.ts","components/Game/hooks/useGame/useGame.ts","services/ai.js","services/tile.js","services/grid.js","services/helper.js","components/Game/Game.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["a","convnetjs","REVISION","d","k","e","l","q","Math","random","p","s","t","sqrt","log","i","n","r","length","randf","randi","floor","randn","zeros","isNaN","ArrayBuffer","Array","Float64Array","maxmin","u","v","maxi","maxv","mini","minv","dv","randperm","weightedSample","arrUnique","push","arrContains","getopt","assert","Error","b","g","f","j","Object","prototype","toString","call","this","sx","sy","depth","w","dw","h","get","c","set","add","get_grad","set_grad","add_grad","cloneAndZero","clone","addFrom","addFromScaled","setConst","toJSON","fromJSON","Vol","augment","m","img_to_vol","o","document","createElement","width","height","getContext","drawImage","name","getImageData","data","out_depth","filters","in_depth","in_sx","in_sy","stride","pad","l1_decay_mul","l2_decay_mul","out_sx","out_sy","layer_type","bias_pref","biases","forward","in_act","out_act","backward","getParamsAndGrads","params","grads","num_neurons","num_inputs","ConvLayer","FullyConnLayer","switchx","switchy","PoolLayer","InputLayer","exp","es","dim","val","RegressionLayer","SoftmaxLayer","SVMLayer","group_size","switches","TanhLayer","MaxoutLayer","ReluLayer","SigmoidLayer","drop_prob","dropped","DropoutLayer","alpha","beta","console","S_cache_","max","min","pow","LocalResponseNormalizationLayer","layers","makeLayers","type","num_classes","activation","getCostLoss","getPrediction","Net","net","learning_rate","l1_decay","l2_decay","batch_size","method","momentum","ro","eps","gsum","xsum","train","Date","getTime","A","G","E","H","F","z","I","B","abs","D","C","fwd_time","bwd_time","l2_decay_loss","l1_decay_loss","cost_loss","softmax_loss","loss","Trainer","SGDTrainer","labels","train_ratio","num_folds","num_candidates","num_epochs","ensemble_size","batch_size_min","batch_size_max","l2_decay_min","l2_decay_max","learning_rate_min","learning_rate_max","momentum_min","momentum_max","neurons_min","neurons_max","folds","candidates","evaluated_candidates","unique_labels","iter","foldix","finish_fold_callback","finish_batch_callback","sampleFolds","sampleCandidates","train_ix","slice","test_ix","sampleCandidate","x","y","layer_defs","trainer_def","trainer","step","evalValErrors","acc","accv","sort","predict_soft","predict","nets","onFinishFold","onFinishBatch","MagicNet","module","exports","window","jsfeat","Button","children","onClick","disabled","className","BoardContext","React","createContext","containerWidth","tileCount","defaultTileCount","BoardProvider","Provider","value","useBoard","useContext","Grid","cells","index","renderGrid","Tile","position","zIndex","useState","scale","setScale","previousValue","ref","useRef","useEffect","current","usePrevProps","withinBoardBoundaries","invariant","shallHighlight","undefined","setTimeout","positionToPixels","style","top","left","transform","Board","tiles","tileCountPerRow","tileWidth","boardWidth","tileList","map","id","restProps","seqId","initialState","byIds","hasChanged","inMotion","GameReducer","state","action","tile","source","destination","restTiles","filter","useGame","isInitialRender","nextId","useReducer","dispatch","createTile","useCallback","throttledMergeTile","mergeTile","updateTile","retrieveTileMap","tileMap","tileCountPerRowOrColumn","fill","forEach","positionToIndex","findEmptyTiles","reduce","result","tileId","indexToPosition","generateRandomTile","emptyTiles","move","retrieveTileIdsPerRowOrColumn","calculateFirstFreeIndex","maxIndex","rowOrColumnIndex","availableTileIds","previousTile","mergedTilesCount","nonEmptyTileIndex","currentTile","mergeWith","hasXChanged","hasYChanged","didTileMove","bind","rowIndex","tileIndex","tileInRowIndex","howManyMerges","_","reverse","maxIndexInRow","columnIndex","tileInColumnIndex","maxIndexInColumn","net_params","oReq","XMLHttpRequest","open","responseType","onload","oEvent","arrayBuffer","response","floatArray","Float32Array","ptr","send","AI","grid","makeInput","moves","previousPosition","mergedFrom","size","startTiles","build","playerTurn","row","availableCells","eachCell","callback","cell","cellOccupied","cellContent","withinBounds","newGrid","insertTile","addRandomTile","cellsAvailable","randomAvailableCell","savePosition","updatePosition","direction","vectors","self","vector","getVector","traversals","buildTraversals","moved","score","prepareTiles","indexes","positions","findFarthestPosition","next","merged","removeTile","moveTile","farthest","positionsEqual","won","pos","previous","cellAvailable","tileMatchesAvailable","other","first","second","string","mark","marked","islands","smoothness","targetCell","target","targetValue","queued","highestValue","highestCell","increases","cellQueue","markList","markAfter","markAndScore","cel","pop","shift","totals","currentValue","nextValue","Helper","encode","ai","decode","best","getBest","translate","colIndex","Game","think","setThink","hintAct","setHintAct","setDisabled","moveLeft","moveRight","moveUp","moveDown","tileCnt","setTileCnt","hintMode","setHintMode","bestMove","handlers","useSwipeable","onSwipedLeft","onSwipedRight","onSwipedUp","onSwipedDown","preventScrollOnSwipe","trackMouse","throttledHandleKeyDown","useThrottledCallback","preventDefault","code","leading","trailing","addEventListener","removeEventListener","App","date","setDate","alert","toISOString","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.61e17ce5.chunk.js","sourcesContent":["/* eslint-disable */\nexport var convnetjs = convnetjs || { REVISION: \"ALPHA\" };\n(function (d) {\n  var k = false;\n  var e = 0;\n  var l = function () {\n    if (k) {\n      k = false;\n      return e;\n    }\n    var q = 2 * Math.random() - 1;\n    var p = 2 * Math.random() - 1;\n    var s = q * q + p * p;\n    if (s == 0 || s > 1) {\n      return l();\n    }\n    var t = Math.sqrt((-2 * Math.log(s)) / s);\n    e = p * t;\n    k = true;\n    return q * t;\n  };\n  var i = function (q, p) {\n    return Math.random() * (p - q) + q;\n  };\n  var g = function (q, p) {\n    return Math.floor(Math.random() * (p - q) + q);\n  };\n  var c = function (q, p) {\n    return q + l() * p;\n  };\n  var f = function (r) {\n    if (typeof r === \"undefined\" || isNaN(r)) {\n      return [];\n    }\n    if (typeof ArrayBuffer === \"undefined\") {\n      var p = new Array(r);\n      for (var q = 0; q < r; q++) {\n        p[q] = 0;\n      }\n      return p;\n    } else {\n      return new Float64Array(r);\n    }\n  };\n  var n = function (p, q) {\n    for (var r = 0, s = p.length; r < s; r++) {\n      if (p[r] === q) {\n        return true;\n      }\n    }\n    return false;\n  };\n  var o = function (q) {\n    var p = [];\n    for (var r = 0, s = q.length; r < s; r++) {\n      if (!n(p, q[r])) {\n        p.push(q[r]);\n      }\n    }\n    return p;\n  };\n  var b = function (q) {\n    if (q.length === 0) {\n      return {};\n    }\n    var p = q[0];\n    var s = q[0];\n    var r = 0;\n    var u = 0;\n    var v = q.length;\n    for (var t = 1; t < v; t++) {\n      if (q[t] > p) {\n        p = q[t];\n        r = t;\n      }\n      if (q[t] < s) {\n        s = q[t];\n        u = t;\n      }\n    }\n    return { maxi: r, maxv: p, mini: u, minv: s, dv: p - s };\n  };\n  var j = function (v) {\n    var s = v,\n      r = 0,\n      p;\n    var u = [];\n    for (var t = 0; t < v; t++) {\n      u[t] = t;\n    }\n    while (s--) {\n      r = Math.floor(Math.random() * (s + 1));\n      p = u[s];\n      u[s] = u[r];\n      u[r] = p;\n    }\n    return u;\n  };\n  var h = function (q, v) {\n    var t = i(0, 1);\n    var s = 0;\n    for (var r = 0, u = q.length; r < u; r++) {\n      s += v[r];\n      if (t < s) {\n        return q[r];\n      }\n    }\n  };\n  var m = function (s, t, p) {\n    if (typeof t === \"string\") {\n      return typeof s[t] !== \"undefined\" ? s[t] : p;\n    } else {\n      var q = p;\n      for (var r = 0; r < t.length; r++) {\n        var u = t[r];\n        if (typeof s[u] !== \"undefined\") {\n          q = s[u];\n        }\n      }\n      return q;\n    }\n  };\n  function a(q, p) {\n    if (!q) {\n      p = p || \"Assertion failed\";\n      if (typeof Error !== \"undefined\") {\n        throw new Error(p);\n      }\n      throw p;\n    }\n  }\n  d.randf = i;\n  d.randi = g;\n  d.randn = c;\n  d.zeros = f;\n  d.maxmin = b;\n  d.randperm = j;\n  d.weightedSample = h;\n  d.arrUnique = o;\n  d.arrContains = n;\n  d.getopt = m;\n  d.assert = a;\n})(convnetjs);\n(function (b) {\n  var a = function (k, g, f, j) {\n    if (Object.prototype.toString.call(k) === \"[object Array]\") {\n      this.sx = 1;\n      this.sy = 1;\n      this.depth = k.length;\n      this.w = b.zeros(this.depth);\n      this.dw = b.zeros(this.depth);\n      for (var d = 0; d < this.depth; d++) {\n        this.w[d] = k[d];\n      }\n    } else {\n      this.sx = k;\n      this.sy = g;\n      this.depth = f;\n      var h = k * g * f;\n      this.w = b.zeros(h);\n      this.dw = b.zeros(h);\n      if (typeof j === \"undefined\") {\n        var e = Math.sqrt(1 / (k * g * f));\n        for (var d = 0; d < h; d++) {\n          this.w[d] = b.randn(0, e);\n        }\n      } else {\n        for (var d = 0; d < h; d++) {\n          this.w[d] = j;\n        }\n      }\n    }\n  };\n  a.prototype = {\n    get: function (c, g, f) {\n      var e = (this.sx * g + c) * this.depth + f;\n      return this.w[e];\n    },\n    set: function (c, h, g, f) {\n      var e = (this.sx * h + c) * this.depth + g;\n      this.w[e] = f;\n    },\n    add: function (c, h, g, f) {\n      var e = (this.sx * h + c) * this.depth + g;\n      this.w[e] += f;\n    },\n    get_grad: function (c, g, f) {\n      var e = (this.sx * g + c) * this.depth + f;\n      return this.dw[e];\n    },\n    set_grad: function (c, h, g, f) {\n      var e = (this.sx * h + c) * this.depth + g;\n      this.dw[e] = f;\n    },\n    add_grad: function (c, h, g, f) {\n      var e = (this.sx * h + c) * this.depth + g;\n      this.dw[e] += f;\n    },\n    cloneAndZero: function () {\n      return new a(this.sx, this.sy, this.depth, 0);\n    },\n    clone: function () {\n      var c = new a(this.sx, this.sy, this.depth, 0);\n      var e = this.w.length;\n      for (var d = 0; d < e; d++) {\n        c.w[d] = this.w[d];\n      }\n      return c;\n    },\n    addFrom: function (c) {\n      for (var d = 0; d < this.w.length; d++) {\n        this.w[d] += c.w[d];\n      }\n    },\n    addFromScaled: function (d, c) {\n      for (var e = 0; e < this.w.length; e++) {\n        this.w[e] += c * d.w[e];\n      }\n    },\n    setConst: function (c) {\n      for (var d = 0; d < this.w.length; d++) {\n        this.w[d] = c;\n      }\n    },\n    toJSON: function () {\n      var c = {};\n      c.sx = this.sx;\n      c.sy = this.sy;\n      c.depth = this.depth;\n      c.w = this.w;\n      return c;\n    },\n    fromJSON: function (d) {\n      this.sx = d.sx;\n      this.sy = d.sy;\n      this.depth = d.depth;\n      var e = this.sx * this.sy * this.depth;\n      this.w = b.zeros(e);\n      this.dw = b.zeros(e);\n      for (var c = 0; c < e; c++) {\n        this.w[c] = d.w[c];\n      }\n    },\n  };\n  b.Vol = a;\n})(convnetjs);\n(function (c) {\n  var a = c.Vol;\n  var b = function (f, h, n, m, g) {\n    if (typeof g === \"undefined\") {\n      var g = false;\n    }\n    if (typeof n === \"undefined\") {\n      var n = c.randi(0, f.sx - h);\n    }\n    if (typeof m === \"undefined\") {\n      var m = c.randi(0, f.sy - h);\n    }\n    var e;\n    if (h !== f.sx || n !== 0 || m !== 0) {\n      e = new a(h, h, f.depth, 0);\n      for (var l = 0; l < h; l++) {\n        for (var k = 0; k < h; k++) {\n          if (l + n < 0 || l + n >= f.sx || k + m < 0 || k + m >= f.sy) {\n            continue;\n          }\n          for (var j = 0; j < f.depth; j++) {\n            e.set(l, k, j, f.get(l + n, k + m, j));\n          }\n        }\n      }\n    } else {\n      e = f;\n    }\n    if (g) {\n      var i = e.cloneAndZero();\n      for (var l = 0; l < e.sx; l++) {\n        for (var k = 0; k < e.sy; k++) {\n          for (var j = 0; j < e.depth; j++) {\n            i.set(l, k, j, e.get(e.sx - l - 1, k, j));\n          }\n        }\n      }\n      e = i;\n    }\n    return e;\n  };\n  var d = function (o, n) {\n    if (typeof n === \"undefined\") {\n      var n = false;\n    }\n    var h = document.createElement(\"canvas\");\n    h.width = o.width;\n    h.height = o.height;\n    var u = h.getContext(\"2d\");\n    try {\n      u.drawImage(o, 0, 0);\n    } catch (q) {\n      if (q.name === \"NS_ERROR_NOT_AVAILABLE\") {\n        return false;\n      } else {\n        throw q;\n      }\n    }\n    try {\n      var v = u.getImageData(0, 0, h.width, h.height);\n    } catch (q) {\n      if (q.name === \"IndexSizeError\") {\n        return false;\n      } else {\n        throw q;\n      }\n    }\n    var g = v.data;\n    var k = o.width;\n    var s = o.height;\n    var t = [];\n    for (var m = 0; m < g.length; m++) {\n      t.push(g[m] / 255 - 0.5);\n    }\n    var r = new a(k, s, 4, 0);\n    r.w = t;\n    if (n) {\n      var f = new a(k, s, 1, 0);\n      for (var m = 0; m < k; m++) {\n        for (var l = 0; l < s; l++) {\n          f.set(m, l, 0, r.get(m, l, 0));\n        }\n      }\n      r = f;\n    }\n    return r;\n  };\n  c.augment = b;\n  c.img_to_vol = d;\n})(convnetjs);\n(function (c) {\n  var a = c.Vol;\n  var d = function (g) {\n    var g = g || {};\n    this.out_depth = g.filters;\n    this.sx = g.sx;\n    this.in_depth = g.in_depth;\n    this.in_sx = g.in_sx;\n    this.in_sy = g.in_sy;\n    this.sy = typeof g.sy !== \"undefined\" ? g.sy : this.sx;\n    this.stride = typeof g.stride !== \"undefined\" ? g.stride : 1;\n    this.pad = typeof g.pad !== \"undefined\" ? g.pad : 0;\n    this.l1_decay_mul =\n      typeof g.l1_decay_mul !== \"undefined\" ? g.l1_decay_mul : 0;\n    this.l2_decay_mul =\n      typeof g.l2_decay_mul !== \"undefined\" ? g.l2_decay_mul : 1;\n    this.out_sx = Math.floor(\n      (this.in_sx + this.pad * 2 - this.sx) / this.stride + 1\n    );\n    this.out_sy = Math.floor(\n      (this.in_sy + this.pad * 2 - this.sy) / this.stride + 1\n    );\n    this.layer_type = \"conv\";\n    var e = typeof g.bias_pref !== \"undefined\" ? g.bias_pref : 0;\n    this.filters = [];\n    for (var f = 0; f < this.out_depth; f++) {\n      this.filters.push(new a(this.sx, this.sy, this.in_depth));\n    }\n    this.biases = new a(1, 1, this.out_depth, e);\n  };\n  d.prototype = {\n    forward: function (h, k) {\n      this.in_act = h;\n      var q = new a(this.out_sx | 0, this.out_sy | 0, this.out_depth | 0, 0);\n      var w = h.sx | 0;\n      var u = h.sy | 0;\n      var r = this.stride | 0;\n      for (var t = 0; t < this.out_depth; t++) {\n        var s = this.filters[t];\n        var n = -this.pad | 0;\n        var l = -this.pad | 0;\n        for (var m = 0; m < this.out_sy; l += r, m++) {\n          n = -this.pad | 0;\n          for (var o = 0; o < this.out_sx; n += r, o++) {\n            var v = 0;\n            for (var e = 0; e < s.sy; e++) {\n              var i = l + e;\n              for (var g = 0; g < s.sx; g++) {\n                var j = n + g;\n                if (i >= 0 && i < u && j >= 0 && j < w) {\n                  for (var p = 0; p < s.depth; p++) {\n                    v +=\n                      s.w[(s.sx * e + g) * s.depth + p] *\n                      h.w[(w * i + j) * h.depth + p];\n                  }\n                }\n              }\n            }\n            v += this.biases.w[t];\n            q.set(o, m, t, v);\n          }\n        }\n      }\n      this.out_act = q;\n      return this.out_act;\n    },\n    backward: function () {\n      var i = this.in_act;\n      i.dw = c.zeros(i.w.length);\n      var w = i.sx | 0;\n      var v = i.sy | 0;\n      var q = this.stride | 0;\n      for (var t = 0; t < this.out_depth; t++) {\n        var r = this.filters[t];\n        var n = -this.pad | 0;\n        var l = -this.pad | 0;\n        for (var m = 0; m < this.out_sy; l += q, m++) {\n          n = -this.pad | 0;\n          for (var o = 0; o < this.out_sx; n += q, o++) {\n            var e = this.out_act.get_grad(o, m, t);\n            for (var g = 0; g < r.sy; g++) {\n              var j = l + g;\n              for (var h = 0; h < r.sx; h++) {\n                var k = n + h;\n                if (j >= 0 && j < v && k >= 0 && k < w) {\n                  for (var p = 0; p < r.depth; p++) {\n                    var u = (w * j + k) * i.depth + p;\n                    var s = (r.sx * g + h) * r.depth + p;\n                    r.dw[s] += i.w[u] * e;\n                    i.dw[u] += r.w[s] * e;\n                  }\n                }\n              }\n            }\n            this.biases.dw[t] += e;\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function () {\n      var e = [];\n      for (var f = 0; f < this.out_depth; f++) {\n        e.push({\n          params: this.filters[f].w,\n          grads: this.filters[f].dw,\n          l2_decay_mul: this.l2_decay_mul,\n          l1_decay_mul: this.l1_decay_mul,\n        });\n      }\n      e.push({\n        params: this.biases.w,\n        grads: this.biases.dw,\n        l1_decay_mul: 0,\n        l2_decay_mul: 0,\n      });\n      return e;\n    },\n    toJSON: function () {\n      var f = {};\n      f.sx = this.sx;\n      f.sy = this.sy;\n      f.stride = this.stride;\n      f.in_depth = this.in_depth;\n      f.out_depth = this.out_depth;\n      f.out_sx = this.out_sx;\n      f.out_sy = this.out_sy;\n      f.layer_type = this.layer_type;\n      f.l1_decay_mul = this.l1_decay_mul;\n      f.l2_decay_mul = this.l2_decay_mul;\n      f.pad = this.pad;\n      f.filters = [];\n      for (var e = 0; e < this.filters.length; e++) {\n        f.filters.push(this.filters[e].toJSON());\n      }\n      f.biases = this.biases.toJSON();\n      return f;\n    },\n    fromJSON: function (g) {\n      this.out_depth = g.out_depth;\n      this.out_sx = g.out_sx;\n      this.out_sy = g.out_sy;\n      this.layer_type = g.layer_type;\n      this.sx = g.sx;\n      this.sy = g.sy;\n      this.stride = g.stride;\n      this.in_depth = g.in_depth;\n      this.filters = [];\n      this.l1_decay_mul =\n        typeof g.l1_decay_mul !== \"undefined\" ? g.l1_decay_mul : 1;\n      this.l2_decay_mul =\n        typeof g.l2_decay_mul !== \"undefined\" ? g.l2_decay_mul : 1;\n      this.pad = typeof g.pad !== \"undefined\" ? g.pad : 0;\n      for (var f = 0; f < g.filters.length; f++) {\n        var e = new a(0, 0, 0, 0);\n        e.fromJSON(g.filters[f]);\n        this.filters.push(e);\n      }\n      this.biases = new a(0, 0, 0, 0);\n      this.biases.fromJSON(g.biases);\n    },\n  };\n  var b = function (g) {\n    var g = g || {};\n    this.out_depth =\n      typeof g.num_neurons !== \"undefined\" ? g.num_neurons : g.filters;\n    this.l1_decay_mul =\n      typeof g.l1_decay_mul !== \"undefined\" ? g.l1_decay_mul : 0;\n    this.l2_decay_mul =\n      typeof g.l2_decay_mul !== \"undefined\" ? g.l2_decay_mul : 1;\n    this.num_inputs = g.in_sx * g.in_sy * g.in_depth;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = \"fc\";\n    var e = typeof g.bias_pref !== \"undefined\" ? g.bias_pref : 0;\n    this.filters = [];\n    for (var f = 0; f < this.out_depth; f++) {\n      this.filters.push(new a(1, 1, this.num_inputs));\n    }\n    this.biases = new a(1, 1, this.out_depth, e);\n  };\n  b.prototype = {\n    forward: function (h, l) {\n      this.in_act = h;\n      var f = new a(1, 1, this.out_depth, 0);\n      var k = h.w;\n      for (var j = 0; j < this.out_depth; j++) {\n        var g = 0;\n        var e = this.filters[j].w;\n        for (var m = 0; m < this.num_inputs; m++) {\n          g += k[m] * e[m];\n        }\n        g += this.biases.w[j];\n        f.w[j] = g;\n      }\n      this.out_act = f;\n      return this.out_act;\n    },\n    backward: function () {\n      var e = this.in_act;\n      e.dw = c.zeros(e.w.length);\n      for (var f = 0; f < this.out_depth; f++) {\n        var h = this.filters[f];\n        var g = this.out_act.dw[f];\n        for (var j = 0; j < this.num_inputs; j++) {\n          e.dw[j] += h.w[j] * g;\n          h.dw[j] += e.w[j] * g;\n        }\n        this.biases.dw[f] += g;\n      }\n    },\n    getParamsAndGrads: function () {\n      var e = [];\n      for (var f = 0; f < this.out_depth; f++) {\n        e.push({\n          params: this.filters[f].w,\n          grads: this.filters[f].dw,\n          l1_decay_mul: this.l1_decay_mul,\n          l2_decay_mul: this.l2_decay_mul,\n        });\n      }\n      e.push({\n        params: this.biases.w,\n        grads: this.biases.dw,\n        l1_decay_mul: 0,\n        l2_decay_mul: 0,\n      });\n      return e;\n    },\n    toJSON: function () {\n      var f = {};\n      f.out_depth = this.out_depth;\n      f.out_sx = this.out_sx;\n      f.out_sy = this.out_sy;\n      f.layer_type = this.layer_type;\n      f.num_inputs = this.num_inputs;\n      f.l1_decay_mul = this.l1_decay_mul;\n      f.l2_decay_mul = this.l2_decay_mul;\n      f.filters = [];\n      for (var e = 0; e < this.filters.length; e++) {\n        f.filters.push(this.filters[e].toJSON());\n      }\n      f.biases = this.biases.toJSON();\n      return f;\n    },\n    fromJSON: function (g) {\n      this.out_depth = g.out_depth;\n      this.out_sx = g.out_sx;\n      this.out_sy = g.out_sy;\n      this.layer_type = g.layer_type;\n      this.num_inputs = g.num_inputs;\n      this.l1_decay_mul =\n        typeof g.l1_decay_mul !== \"undefined\" ? g.l1_decay_mul : 1;\n      this.l2_decay_mul =\n        typeof g.l2_decay_mul !== \"undefined\" ? g.l2_decay_mul : 1;\n      this.filters = [];\n      for (var f = 0; f < g.filters.length; f++) {\n        var e = new a(0, 0, 0, 0);\n        e.fromJSON(g.filters[f]);\n        this.filters.push(e);\n      }\n      this.biases = new a(0, 0, 0, 0);\n      this.biases.fromJSON(g.biases);\n    },\n  };\n  c.ConvLayer = d;\n  c.FullyConnLayer = b;\n})(convnetjs);\n(function (c) {\n  var a = c.Vol;\n  var b = function (d) {\n    var d = d || {};\n    this.sx = d.sx;\n    this.in_depth = d.in_depth;\n    this.in_sx = d.in_sx;\n    this.in_sy = d.in_sy;\n    this.sy = typeof d.sy !== \"undefined\" ? d.sy : this.sx;\n    this.stride = typeof d.stride !== \"undefined\" ? d.stride : 2;\n    this.pad = typeof d.pad !== \"undefined\" ? d.pad : 0;\n    this.out_depth = this.in_depth;\n    this.out_sx = Math.floor(\n      (this.in_sx + this.pad * 2 - this.sx) / this.stride + 1\n    );\n    this.out_sy = Math.floor(\n      (this.in_sy + this.pad * 2 - this.sy) / this.stride + 1\n    );\n    this.layer_type = \"pool\";\n    this.switchx = c.zeros(this.out_sx * this.out_sy * this.out_depth);\n    this.switchy = c.zeros(this.out_sx * this.out_sy * this.out_depth);\n  };\n  b.prototype = {\n    forward: function (l, u) {\n      this.in_act = l;\n      var h = new a(this.out_sx, this.out_sy, this.out_depth, 0);\n      var i = 0;\n      for (var p = 0; p < this.out_depth; p++) {\n        var s = -this.pad;\n        var q = -this.pad;\n        for (var e = 0; e < this.out_sx; s += this.stride, e++) {\n          q = -this.pad;\n          for (var w = 0; w < this.out_sy; q += this.stride, w++) {\n            var r = -99999;\n            var o = -1,\n              k = -1;\n            for (var m = 0; m < this.sx; m++) {\n              for (var j = 0; j < this.sy; j++) {\n                var f = q + j;\n                var g = s + m;\n                if (f >= 0 && f < l.sy && g >= 0 && g < l.sx) {\n                  var t = l.get(g, f, p);\n                  if (t > r) {\n                    r = t;\n                    o = g;\n                    k = f;\n                  }\n                }\n              }\n            }\n            this.switchx[i] = o;\n            this.switchy[i] = k;\n            i++;\n            h.set(e, w, p, r);\n          }\n        }\n      }\n      this.out_act = h;\n      return this.out_act;\n    },\n    backward: function () {\n      var h = this.in_act;\n      h.dw = c.zeros(h.w.length);\n      var f = this.out_act;\n      var g = 0;\n      for (var j = 0; j < this.out_depth; j++) {\n        var l = -this.pad;\n        var k = -this.pad;\n        for (var e = 0; e < this.out_sx; l += this.stride, e++) {\n          k = -this.pad;\n          for (var m = 0; m < this.out_sy; k += this.stride, m++) {\n            var i = this.out_act.get_grad(e, m, j);\n            h.add_grad(this.switchx[g], this.switchy[g], j, i);\n            g++;\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var d = {};\n      d.sx = this.sx;\n      d.sy = this.sy;\n      d.stride = this.stride;\n      d.in_depth = this.in_depth;\n      d.out_depth = this.out_depth;\n      d.out_sx = this.out_sx;\n      d.out_sy = this.out_sy;\n      d.layer_type = this.layer_type;\n      d.pad = this.pad;\n      return d;\n    },\n    fromJSON: function (d) {\n      this.out_depth = d.out_depth;\n      this.out_sx = d.out_sx;\n      this.out_sy = d.out_sy;\n      this.layer_type = d.layer_type;\n      this.sx = d.sx;\n      this.sy = d.sy;\n      this.stride = d.stride;\n      this.in_depth = d.in_depth;\n      this.pad = typeof d.pad !== \"undefined\" ? d.pad : 0;\n      this.switchx = c.zeros(this.out_sx * this.out_sy * this.out_depth);\n      this.switchy = c.zeros(this.out_sx * this.out_sy * this.out_depth);\n    },\n  };\n  c.PoolLayer = b;\n})(convnetjs);\n(function (c) {\n  var a = c.Vol;\n  var d = c.getopt;\n  var b = function (e) {\n    var e = e || {};\n    this.out_depth = d(e, [\"out_depth\", \"depth\"], 0);\n    this.out_sx = d(e, [\"out_sx\", \"sx\", \"width\"], 1);\n    this.out_sy = d(e, [\"out_sy\", \"sy\", \"height\"], 1);\n    this.layer_type = \"input\";\n  };\n  b.prototype = {\n    forward: function (e, f) {\n      this.in_act = e;\n      this.out_act = e;\n      return this.out_act;\n    },\n    backward: function () {},\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var e = {};\n      e.out_depth = this.out_depth;\n      e.out_sx = this.out_sx;\n      e.out_sy = this.out_sy;\n      e.layer_type = this.layer_type;\n      return e;\n    },\n    fromJSON: function (e) {\n      this.out_depth = e.out_depth;\n      this.out_sx = e.out_sx;\n      this.out_sy = e.out_sy;\n      this.layer_type = e.layer_type;\n    },\n  };\n  c.InputLayer = b;\n})(convnetjs);\n(function (e) {\n  var a = e.Vol;\n  var c = function (f) {\n    var f = f || {};\n    this.num_inputs = f.in_sx * f.in_sy * f.in_depth;\n    this.out_depth = this.num_inputs;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = \"softmax\";\n  };\n  c.prototype = {\n    forward: function (h, o) {\n      this.in_act = h;\n      var f = new a(1, 1, this.out_depth, 0);\n      var j = h.w;\n      var k = h.w[0];\n      for (var l = 1; l < this.out_depth; l++) {\n        if (j[l] > k) {\n          k = j[l];\n        }\n      }\n      var n = e.zeros(this.out_depth);\n      var g = 0;\n      for (var l = 0; l < this.out_depth; l++) {\n        var m = Math.exp(j[l] - k);\n        g += m;\n        n[l] = m;\n      }\n      for (var l = 0; l < this.out_depth; l++) {\n        n[l] /= g;\n        f.w[l] = n[l];\n      }\n      this.es = n;\n      this.out_act = f;\n      return this.out_act;\n    },\n    backward: function (k) {\n      var f = this.in_act;\n      f.dw = e.zeros(f.w.length);\n      for (var h = 0; h < this.out_depth; h++) {\n        var g = h === k ? 1 : 0;\n        var j = -(g - this.es[h]);\n        f.dw[h] = j;\n      }\n      return -Math.log(this.es[k]);\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var f = {};\n      f.out_depth = this.out_depth;\n      f.out_sx = this.out_sx;\n      f.out_sy = this.out_sy;\n      f.layer_type = this.layer_type;\n      f.num_inputs = this.num_inputs;\n      return f;\n    },\n    fromJSON: function (f) {\n      this.out_depth = f.out_depth;\n      this.out_sx = f.out_sx;\n      this.out_sy = f.out_sy;\n      this.layer_type = f.layer_type;\n      this.num_inputs = f.num_inputs;\n    },\n  };\n  var d = function (f) {\n    var f = f || {};\n    this.num_inputs = f.in_sx * f.in_sy * f.in_depth;\n    this.out_depth = this.num_inputs;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = \"regression\";\n  };\n  d.prototype = {\n    forward: function (f, g) {\n      this.in_act = f;\n      this.out_act = f;\n      return f;\n    },\n    backward: function (l) {\n      var f = this.in_act;\n      f.dw = e.zeros(f.w.length);\n      var k = 0;\n      if (l instanceof Array || l instanceof Float64Array) {\n        for (var j = 0; j < this.out_depth; j++) {\n          var g = f.w[j] - l[j];\n          f.dw[j] = g;\n          k += 0.5 * g * g;\n        }\n      } else {\n        if (typeof l === \"number\") {\n          var g = f.w[0] - l;\n          f.dw[0] = g;\n          k += 0.5 * g * g;\n        } else {\n          var j = l.dim;\n          var h = l.val;\n          var g = f.w[j] - h;\n          f.dw[j] = g;\n          k += 0.5 * g * g;\n        }\n      }\n      return k;\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var f = {};\n      f.out_depth = this.out_depth;\n      f.out_sx = this.out_sx;\n      f.out_sy = this.out_sy;\n      f.layer_type = this.layer_type;\n      f.num_inputs = this.num_inputs;\n      return f;\n    },\n    fromJSON: function (f) {\n      this.out_depth = f.out_depth;\n      this.out_sx = f.out_sx;\n      this.out_sy = f.out_sy;\n      this.layer_type = f.layer_type;\n      this.num_inputs = f.num_inputs;\n    },\n  };\n  var b = function (f) {\n    var f = f || {};\n    this.num_inputs = f.in_sx * f.in_sy * f.in_depth;\n    this.out_depth = this.num_inputs;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = \"svm\";\n  };\n  b.prototype = {\n    forward: function (f, g) {\n      this.in_act = f;\n      this.out_act = f;\n      return f;\n    },\n    backward: function (m) {\n      var g = this.in_act;\n      g.dw = e.zeros(g.w.length);\n      var f = g.w[m];\n      var k = 1;\n      var j = 0;\n      for (var h = 0; h < this.out_depth; h++) {\n        if (m === h) {\n          continue;\n        }\n        var l = -f + g.w[h] + k;\n        if (l > 0) {\n          g.dw[h] += 1;\n          g.dw[m] -= 1;\n          j += l;\n        }\n      }\n      return j;\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var f = {};\n      f.out_depth = this.out_depth;\n      f.out_sx = this.out_sx;\n      f.out_sy = this.out_sy;\n      f.layer_type = this.layer_type;\n      f.num_inputs = this.num_inputs;\n      return f;\n    },\n    fromJSON: function (f) {\n      this.out_depth = f.out_depth;\n      this.out_sx = f.out_sx;\n      this.out_sy = f.out_sy;\n      this.layer_type = f.layer_type;\n      this.num_inputs = f.num_inputs;\n    },\n  };\n  e.RegressionLayer = d;\n  e.SoftmaxLayer = c;\n  e.SVMLayer = b;\n})(convnetjs);\n(function (d) {\n  var a = d.Vol;\n  var e = function (h) {\n    var h = h || {};\n    this.out_sx = h.in_sx;\n    this.out_sy = h.in_sy;\n    this.out_depth = h.in_depth;\n    this.layer_type = \"relu\";\n  };\n  e.prototype = {\n    forward: function (j, l) {\n      this.in_act = j;\n      var h = j.clone();\n      var m = j.w.length;\n      var n = h.w;\n      for (var k = 0; k < m; k++) {\n        if (n[k] < 0) {\n          n[k] = 0;\n        }\n      }\n      this.out_act = h;\n      return this.out_act;\n    },\n    backward: function () {\n      var j = this.in_act;\n      var h = this.out_act;\n      var l = j.w.length;\n      j.dw = d.zeros(l);\n      for (var k = 0; k < l; k++) {\n        if (h.w[k] <= 0) {\n          j.dw[k] = 0;\n        } else {\n          j.dw[k] = h.dw[k];\n        }\n      }\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var h = {};\n      h.out_depth = this.out_depth;\n      h.out_sx = this.out_sx;\n      h.out_sy = this.out_sy;\n      h.layer_type = this.layer_type;\n      return h;\n    },\n    fromJSON: function (h) {\n      this.out_depth = h.out_depth;\n      this.out_sx = h.out_sx;\n      this.out_sy = h.out_sy;\n      this.layer_type = h.layer_type;\n    },\n  };\n  var g = function (h) {\n    var h = h || {};\n    this.out_sx = h.in_sx;\n    this.out_sy = h.in_sy;\n    this.out_depth = h.in_depth;\n    this.layer_type = \"sigmoid\";\n  };\n  g.prototype = {\n    forward: function (j, m) {\n      this.in_act = j;\n      var h = j.cloneAndZero();\n      var n = j.w.length;\n      var o = h.w;\n      var l = j.w;\n      for (var k = 0; k < n; k++) {\n        o[k] = 1 / (1 + Math.exp(-l[k]));\n      }\n      this.out_act = h;\n      return this.out_act;\n    },\n    backward: function () {\n      var j = this.in_act;\n      var h = this.out_act;\n      var m = j.w.length;\n      j.dw = d.zeros(m);\n      for (var k = 0; k < m; k++) {\n        var l = h.w[k];\n        j.dw[k] = l * (1 - l) * h.dw[k];\n      }\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var h = {};\n      h.out_depth = this.out_depth;\n      h.out_sx = this.out_sx;\n      h.out_sy = this.out_sy;\n      h.layer_type = this.layer_type;\n      return h;\n    },\n    fromJSON: function (h) {\n      this.out_depth = h.out_depth;\n      this.out_sx = h.out_sx;\n      this.out_sy = h.out_sy;\n      this.layer_type = h.layer_type;\n    },\n  };\n  var f = function (h) {\n    var h = h || {};\n    this.group_size = typeof h.group_size !== \"undefined\" ? h.group_size : 2;\n    this.out_sx = h.in_sx;\n    this.out_sy = h.in_sy;\n    this.out_depth = Math.floor(h.in_depth / this.group_size);\n    this.layer_type = \"maxout\";\n    this.switches = d.zeros(this.out_sx * this.out_sy * this.out_depth);\n  };\n  f.prototype = {\n    forward: function (l, w) {\n      this.in_act = l;\n      var q = this.out_depth;\n      var v = new a(this.out_sx, this.out_sy, this.out_depth, 0);\n      if (this.out_sx === 1 && this.out_sy === 1) {\n        for (var p = 0; p < q; p++) {\n          var m = p * this.group_size;\n          var u = l.w[m];\n          var r = 0;\n          for (var o = 1; o < this.group_size; o++) {\n            var h = l.w[m + o];\n            if (h > u) {\n              u = h;\n              r = o;\n            }\n          }\n          v.w[p] = u;\n          this.switches[p] = m + r;\n        }\n      } else {\n        var k = 0;\n        for (var t = 0; t < l.sx; t++) {\n          for (var s = 0; s < l.sy; s++) {\n            for (var p = 0; p < q; p++) {\n              var m = p * this.group_size;\n              var u = l.get(t, s, m);\n              var r = 0;\n              for (var o = 1; o < this.group_size; o++) {\n                var h = l.get(t, s, m + o);\n                if (h > u) {\n                  u = h;\n                  r = o;\n                }\n              }\n              v.set(t, s, p, u);\n              this.switches[k] = m + r;\n              k++;\n            }\n          }\n        }\n      }\n      this.out_act = v;\n      return this.out_act;\n    },\n    backward: function () {\n      var k = this.in_act;\n      var j = this.out_act;\n      var o = this.out_depth;\n      k.dw = d.zeros(k.w.length);\n      if (this.out_sx === 1 && this.out_sy === 1) {\n        for (var l = 0; l < o; l++) {\n          var m = j.dw[l];\n          k.dw[this.switches[l]] = m;\n        }\n      } else {\n        var q = 0;\n        for (var h = 0; h < j.sx; h++) {\n          for (var p = 0; p < j.sy; p++) {\n            for (var l = 0; l < o; l++) {\n              var m = j.get_grad(h, p, l);\n              k.set_grad(h, p, this.switches[q], m);\n              q++;\n            }\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var h = {};\n      h.out_depth = this.out_depth;\n      h.out_sx = this.out_sx;\n      h.out_sy = this.out_sy;\n      h.layer_type = this.layer_type;\n      h.group_size = this.group_size;\n      return h;\n    },\n    fromJSON: function (h) {\n      this.out_depth = h.out_depth;\n      this.out_sx = h.out_sx;\n      this.out_sy = h.out_sy;\n      this.layer_type = h.layer_type;\n      this.group_size = h.group_size;\n      this.switches = d.zeros(this.group_size);\n    },\n  };\n  function c(h) {\n    var i = Math.exp(2 * h);\n    return (i - 1) / (i + 1);\n  }\n  var b = function (h) {\n    var h = h || {};\n    this.out_sx = h.in_sx;\n    this.out_sy = h.in_sy;\n    this.out_depth = h.in_depth;\n    this.layer_type = \"tanh\";\n  };\n  b.prototype = {\n    forward: function (j, l) {\n      this.in_act = j;\n      var h = j.cloneAndZero();\n      var m = j.w.length;\n      for (var k = 0; k < m; k++) {\n        h.w[k] = c(j.w[k]);\n      }\n      this.out_act = h;\n      return this.out_act;\n    },\n    backward: function () {\n      var j = this.in_act;\n      var h = this.out_act;\n      var m = j.w.length;\n      j.dw = d.zeros(m);\n      for (var k = 0; k < m; k++) {\n        var l = h.w[k];\n        j.dw[k] = (1 - l * l) * h.dw[k];\n      }\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var h = {};\n      h.out_depth = this.out_depth;\n      h.out_sx = this.out_sx;\n      h.out_sy = this.out_sy;\n      h.layer_type = this.layer_type;\n      return h;\n    },\n    fromJSON: function (h) {\n      this.out_depth = h.out_depth;\n      this.out_sx = h.out_sx;\n      this.out_sy = h.out_sy;\n      this.layer_type = h.layer_type;\n    },\n  };\n  d.TanhLayer = b;\n  d.MaxoutLayer = f;\n  d.ReluLayer = e;\n  d.SigmoidLayer = g;\n})(convnetjs);\n(function (c) {\n  var a = c.Vol;\n  var b = function (d) {\n    var d = d || {};\n    this.out_sx = d.in_sx;\n    this.out_sy = d.in_sy;\n    this.out_depth = d.in_depth;\n    this.layer_type = \"dropout\";\n    this.drop_prob = typeof d.drop_prob !== \"undefined\" ? d.drop_prob : 0.5;\n    this.dropped = c.zeros(this.out_sx * this.out_sy * this.out_depth);\n  };\n  b.prototype = {\n    forward: function (e, g) {\n      this.in_act = e;\n      if (typeof g === \"undefined\") {\n        g = false;\n      }\n      var d = e.clone();\n      var h = e.w.length;\n      if (g) {\n        for (var f = 0; f < h; f++) {\n          if (Math.random() < this.drop_prob) {\n            d.w[f] = 0;\n            this.dropped[f] = true;\n          } else {\n            this.dropped[f] = false;\n          }\n        }\n      } else {\n        for (var f = 0; f < h; f++) {\n          d.w[f] *= this.drop_prob;\n        }\n      }\n      this.out_act = d;\n      return this.out_act;\n    },\n    backward: function () {\n      var d = this.in_act;\n      var f = this.out_act;\n      var g = d.w.length;\n      d.dw = c.zeros(g);\n      for (var e = 0; e < g; e++) {\n        if (!this.dropped[e]) {\n          d.dw[e] = f.dw[e];\n        }\n      }\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var d = {};\n      d.out_depth = this.out_depth;\n      d.out_sx = this.out_sx;\n      d.out_sy = this.out_sy;\n      d.layer_type = this.layer_type;\n      d.drop_prob = this.drop_prob;\n      return d;\n    },\n    fromJSON: function (d) {\n      this.out_depth = d.out_depth;\n      this.out_sx = d.out_sx;\n      this.out_sy = d.out_sy;\n      this.layer_type = d.layer_type;\n      this.drop_prob = d.drop_prob;\n    },\n  };\n  c.DropoutLayer = b;\n})(convnetjs);\n(function (c) {\n  var a = c.Vol;\n  var b = function (d) {\n    var d = d || {};\n    this.k = d.k;\n    this.n = d.n;\n    this.alpha = d.alpha;\n    this.beta = d.beta;\n    this.out_sx = d.in_sx;\n    this.out_sy = d.in_sy;\n    this.out_depth = d.in_depth;\n    this.layer_type = \"lrn\";\n    if (this.n % 2 === 0) {\n      console.log(\"WARNING n should be odd for LRN layer\");\n    }\n  };\n  b.prototype = {\n    forward: function (f, p) {\n      this.in_act = f;\n      var e = f.cloneAndZero();\n      this.S_cache_ = f.cloneAndZero();\n      var k = Math.floor(this.n / 2);\n      for (var n = 0; n < f.sx; n++) {\n        for (var m = 0; m < f.sy; m++) {\n          for (var h = 0; h < f.depth; h++) {\n            var l = f.get(n, m, h);\n            var o = 0;\n            for (\n              var g = Math.max(0, h - k);\n              g <= Math.min(h + k, f.depth - 1);\n              g++\n            ) {\n              var d = f.get(n, m, g);\n              o += d * d;\n            }\n            o *= this.alpha / this.n;\n            o += this.k;\n            this.S_cache_.set(n, m, h, o);\n            o = Math.pow(o, this.beta);\n            e.set(n, m, h, l / o);\n          }\n        }\n      }\n      this.out_act = e;\n      return this.out_act;\n    },\n    backward: function () {\n      var f = this.in_act;\n      f.dw = c.zeros(f.w.length);\n      var d = this.out_act;\n      var n = Math.floor(this.n / 2);\n      for (var r = 0; r < f.sx; r++) {\n        for (var q = 0; q < f.sy; q++) {\n          for (var l = 0; l < f.depth; l++) {\n            var p = this.out_act.get_grad(r, q, l);\n            var k = this.S_cache_.get(r, q, l);\n            var e = Math.pow(k, this.beta);\n            var s = e * e;\n            for (\n              var h = Math.max(0, l - n);\n              h <= Math.min(l + n, f.depth - 1);\n              h++\n            ) {\n              var o = f.get(r, q, h);\n              var m =\n                ((-o * this.beta * Math.pow(k, this.beta - 1) * this.alpha) /\n                  this.n) *\n                2 *\n                o;\n              if (h === l) {\n                m += e;\n              }\n              m /= s;\n              m *= p;\n              f.add_grad(r, q, h, m);\n            }\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function () {\n      return [];\n    },\n    toJSON: function () {\n      var d = {};\n      d.k = this.k;\n      d.n = this.n;\n      d.alpha = this.alpha;\n      d.beta = this.beta;\n      d.out_sx = this.out_sx;\n      d.out_sy = this.out_sy;\n      d.out_depth = this.out_depth;\n      d.layer_type = this.layer_type;\n      return d;\n    },\n    fromJSON: function (d) {\n      this.k = d.k;\n      this.n = d.n;\n      this.alpha = d.alpha;\n      this.beta = d.beta;\n      this.out_sx = d.out_sx;\n      this.out_sy = d.out_sy;\n      this.out_depth = d.out_depth;\n      this.layer_type = d.layer_type;\n    },\n  };\n  c.LocalResponseNormalizationLayer = b;\n})(convnetjs);\n(function (d) {\n  var a = d.Vol;\n  var b = d.assert;\n  var c = function (e) {\n    this.layers = [];\n  };\n  c.prototype = {\n    makeLayers: function (e) {\n      b(\n        e.length >= 2,\n        \"Error! At least one input layer and one loss layer are required.\"\n      );\n      b(\n        e[0].type === \"input\",\n        \"Error! First layer must be the input layer, to declare size of inputs\"\n      );\n      var f = function () {\n        var m = [];\n        for (var l = 0; l < e.length; l++) {\n          var n = e[l];\n          if (n.type === \"softmax\" || n.type === \"svm\") {\n            m.push({ type: \"fc\", num_neurons: n.num_classes });\n          }\n          if (n.type === \"regression\") {\n            m.push({ type: \"fc\", num_neurons: n.num_neurons });\n          }\n          if (\n            (n.type === \"fc\" || n.type === \"conv\") &&\n            typeof n.bias_pref === \"undefined\"\n          ) {\n            n.bias_pref = 0;\n            if (\n              typeof n.activation !== \"undefined\" &&\n              n.activation === \"relu\"\n            ) {\n              n.bias_pref = 0.1;\n            }\n          }\n          m.push(n);\n          if (typeof n.activation !== \"undefined\") {\n            if (n.activation === \"relu\") {\n              m.push({ type: \"relu\" });\n            } else {\n              if (n.activation === \"sigmoid\") {\n                m.push({ type: \"sigmoid\" });\n              } else {\n                if (n.activation === \"tanh\") {\n                  m.push({ type: \"tanh\" });\n                } else {\n                  if (n.activation === \"maxout\") {\n                    var k = n.group_size !== \"undefined\" ? n.group_size : 2;\n                    m.push({ type: \"maxout\", group_size: k });\n                  } else {\n                    console.log(\"ERROR unsupported activation \" + n.activation);\n                  }\n                }\n              }\n            }\n          }\n          if (typeof n.drop_prob !== \"undefined\" && n.type !== \"dropout\") {\n            m.push({ type: \"dropout\", drop_prob: n.drop_prob });\n          }\n        }\n        return m;\n      };\n      e = f(e);\n      this.layers = [];\n      for (var g = 0; g < e.length; g++) {\n        var j = e[g];\n        if (g > 0) {\n          var h = this.layers[g - 1];\n          j.in_sx = h.out_sx;\n          j.in_sy = h.out_sy;\n          j.in_depth = h.out_depth;\n        }\n        switch (j.type) {\n          case \"fc\":\n            this.layers.push(new d.FullyConnLayer(j));\n            break;\n          case \"lrn\":\n            this.layers.push(new d.LocalResponseNormalizationLayer(j));\n            break;\n          case \"dropout\":\n            this.layers.push(new d.DropoutLayer(j));\n            break;\n          case \"input\":\n            this.layers.push(new d.InputLayer(j));\n            break;\n          case \"softmax\":\n            this.layers.push(new d.SoftmaxLayer(j));\n            break;\n          case \"regression\":\n            this.layers.push(new d.RegressionLayer(j));\n            break;\n          case \"conv\":\n            this.layers.push(new d.ConvLayer(j));\n            break;\n          case \"pool\":\n            this.layers.push(new d.PoolLayer(j));\n            break;\n          case \"relu\":\n            this.layers.push(new d.ReluLayer(j));\n            break;\n          case \"sigmoid\":\n            this.layers.push(new d.SigmoidLayer(j));\n            break;\n          case \"tanh\":\n            this.layers.push(new d.TanhLayer(j));\n            break;\n          case \"maxout\":\n            this.layers.push(new d.MaxoutLayer(j));\n            break;\n          case \"svm\":\n            this.layers.push(new d.SVMLayer(j));\n            break;\n          default:\n            console.log(\"ERROR: UNRECOGNIZED LAYER TYPE: \" + j.type);\n        }\n      }\n    },\n    forward: function (f, h) {\n      if (typeof h === \"undefined\") {\n        h = false;\n      }\n      var e = this.layers[0].forward(f, h);\n      for (var g = 1; g < this.layers.length; g++) {\n        e = this.layers[g].forward(e, h);\n      }\n      return e;\n    },\n    getCostLoss: function (e, h) {\n      this.forward(e, false);\n      var g = this.layers.length;\n      var f = this.layers[g - 1].backward(h);\n      return f;\n    },\n    backward: function (h) {\n      var g = this.layers.length;\n      var f = this.layers[g - 1].backward(h);\n      for (var e = g - 2; e >= 0; e--) {\n        this.layers[e].backward();\n      }\n      return f;\n    },\n    getParamsAndGrads: function () {\n      var e = [];\n      for (var g = 0; g < this.layers.length; g++) {\n        var h = this.layers[g].getParamsAndGrads();\n        for (var f = 0; f < h.length; f++) {\n          e.push(h[f]);\n        }\n      }\n      return e;\n    },\n    getPrediction: function () {\n      var h = this.layers[this.layers.length - 1];\n      b(\n        h.layer_type === \"softmax\",\n        \"getPrediction function assumes softmax as last layer of the net!\"\n      );\n      var j = h.out_act.w;\n      var e = j[0];\n      var f = 0;\n      for (var g = 1; g < j.length; g++) {\n        if (j[g] > e) {\n          e = j[g];\n          f = g;\n        }\n      }\n      return f;\n    },\n    toJSON: function () {\n      var f = {};\n      f.layers = [];\n      for (var e = 0; e < this.layers.length; e++) {\n        f.layers.push(this.layers[e].toJSON());\n      }\n      return f;\n    },\n    fromJSON: function (j) {\n      this.layers = [];\n      for (var h = 0; h < j.layers.length; h++) {\n        var f = j.layers[h];\n        var g = f.layer_type;\n        var e;\n        if (g === \"input\") {\n          e = new d.InputLayer();\n        }\n        if (g === \"relu\") {\n          e = new d.ReluLayer();\n        }\n        if (g === \"sigmoid\") {\n          e = new d.SigmoidLayer();\n        }\n        if (g === \"tanh\") {\n          e = new d.TanhLayer();\n        }\n        if (g === \"dropout\") {\n          e = new d.DropoutLayer();\n        }\n        if (g === \"conv\") {\n          e = new d.ConvLayer();\n        }\n        if (g === \"pool\") {\n          e = new d.PoolLayer();\n        }\n        if (g === \"lrn\") {\n          e = new d.LocalResponseNormalizationLayer();\n        }\n        if (g === \"softmax\") {\n          e = new d.SoftmaxLayer();\n        }\n        if (g === \"regression\") {\n          e = new d.RegressionLayer();\n        }\n        if (g === \"fc\") {\n          e = new d.FullyConnLayer();\n        }\n        if (g === \"maxout\") {\n          e = new d.MaxoutLayer();\n        }\n        if (g === \"svm\") {\n          e = new d.SVMLayer();\n        }\n        e.fromJSON(f);\n        this.layers.push(e);\n      }\n    },\n  };\n  d.Net = c;\n})(convnetjs);\n(function (b) {\n  var a = b.Vol;\n  var c = function (e, d) {\n    this.net = e;\n    var d = d || {};\n    this.learning_rate =\n      typeof d.learning_rate !== \"undefined\" ? d.learning_rate : 0.01;\n    this.l1_decay = typeof d.l1_decay !== \"undefined\" ? d.l1_decay : 0;\n    this.l2_decay = typeof d.l2_decay !== \"undefined\" ? d.l2_decay : 0;\n    this.batch_size = typeof d.batch_size !== \"undefined\" ? d.batch_size : 1;\n    this.method = typeof d.method !== \"undefined\" ? d.method : \"sgd\";\n    this.momentum = typeof d.momentum !== \"undefined\" ? d.momentum : 0.9;\n    this.ro = typeof d.ro !== \"undefined\" ? d.ro : 0.95;\n    this.eps = typeof d.eps !== \"undefined\" ? d.eps : 0.000001;\n    this.k = 0;\n    this.gsum = [];\n    this.xsum = [];\n  };\n  c.prototype = {\n    train: function (s, r) {\n      var h = new Date().getTime();\n      this.net.forward(s, true);\n      var f = new Date().getTime();\n      var q = f - h;\n      var h = new Date().getTime();\n      var A = this.net.backward(r);\n      var k = 0;\n      var d = 0;\n      var f = new Date().getTime();\n      var G = f - h;\n      this.k++;\n      if (this.k % this.batch_size === 0) {\n        var e = this.net.getParamsAndGrads();\n        if (\n          this.gsum.length === 0 &&\n          (this.method !== \"sgd\" || this.momentum > 0)\n        ) {\n          for (var E = 0; E < e.length; E++) {\n            this.gsum.push(b.zeros(e[E].params.length));\n            if (this.method === \"adadelta\") {\n              this.xsum.push(b.zeros(e[E].params.length));\n            } else {\n              this.xsum.push([]);\n            }\n          }\n        }\n        for (var E = 0; E < e.length; E++) {\n          var H = e[E];\n          var w = H.params;\n          var F = H.grads;\n          var z = typeof H.l2_decay_mul !== \"undefined\" ? H.l2_decay_mul : 1;\n          var I = typeof H.l1_decay_mul !== \"undefined\" ? H.l1_decay_mul : 1;\n          var l = this.l2_decay * z;\n          var n = this.l1_decay * I;\n          var u = w.length;\n          for (var B = 0; B < u; B++) {\n            k += (l * w[B] * w[B]) / 2;\n            d += n * Math.abs(w[B]);\n            var D = n * (w[B] > 0 ? 1 : -1);\n            var o = l * w[B];\n            var t = (o + D + F[B]) / this.batch_size;\n            var m = this.gsum[E];\n            var C = this.xsum[E];\n            if (this.method === \"adagrad\") {\n              m[B] = m[B] + t * t;\n              var v = (-this.learning_rate / Math.sqrt(m[B] + this.eps)) * t;\n              w[B] += v;\n            } else {\n              if (this.method === \"windowgrad\") {\n                m[B] = this.ro * m[B] + (1 - this.ro) * t * t;\n                var v = (-this.learning_rate / Math.sqrt(m[B] + this.eps)) * t;\n                w[B] += v;\n              } else {\n                if (this.method === \"adadelta\") {\n                  m[B] = this.ro * m[B] + (1 - this.ro) * t * t;\n                  var v = -Math.sqrt((C[B] + this.eps) / (m[B] + this.eps)) * t;\n                  C[B] = this.ro * C[B] + (1 - this.ro) * v * v;\n                  w[B] += v;\n                } else {\n                  if (this.method === \"nesterov\") {\n                    var v = m[B];\n                    m[B] = m[B] * this.momentum + this.learning_rate * t;\n                    v = this.momentum * v - (1 + this.momentum) * m[B];\n                    w[B] += v;\n                  } else {\n                    if (this.momentum > 0) {\n                      var v = this.momentum * m[B] - this.learning_rate * t;\n                      m[B] = v;\n                      w[B] += v;\n                    } else {\n                      w[B] += -this.learning_rate * t;\n                    }\n                  }\n                }\n              }\n            }\n            F[B] = 0;\n          }\n        }\n      }\n      return {\n        fwd_time: q,\n        bwd_time: G,\n        l2_decay_loss: k,\n        l1_decay_loss: d,\n        cost_loss: A,\n        softmax_loss: A,\n        loss: A + d + k,\n      };\n    },\n  };\n  b.Trainer = c;\n  b.SGDTrainer = c;\n})(convnetjs);\n(function (c) {\n  var e = c.randf;\n  var d = c.randi;\n  var j = c.Net;\n  var g = c.Trainer;\n  var b = c.maxmin;\n  var h = c.randperm;\n  var f = c.weightedSample;\n  var i = c.getopt;\n  var k = c.arrUnique;\n  var a = function (m, n, l) {\n    var l = l || {};\n    if (typeof m === \"undefined\") {\n      m = [];\n    }\n    if (typeof n === \"undefined\") {\n      n = [];\n    }\n    this.data = m;\n    this.labels = n;\n    this.train_ratio = i(l, \"train_ratio\", 0.7);\n    this.num_folds = i(l, \"num_folds\", 10);\n    this.num_candidates = i(l, \"num_candidates\", 50);\n    this.num_epochs = i(l, \"num_epochs\", 50);\n    this.ensemble_size = i(l, \"ensemble_size\", 10);\n    this.batch_size_min = i(l, \"batch_size_min\", 10);\n    this.batch_size_max = i(l, \"batch_size_max\", 300);\n    this.l2_decay_min = i(l, \"l2_decay_min\", -4);\n    this.l2_decay_max = i(l, \"l2_decay_max\", 2);\n    this.learning_rate_min = i(l, \"learning_rate_min\", -4);\n    this.learning_rate_max = i(l, \"learning_rate_max\", 0);\n    this.momentum_min = i(l, \"momentum_min\", 0.9);\n    this.momentum_max = i(l, \"momentum_max\", 0.9);\n    this.neurons_min = i(l, \"neurons_min\", 5);\n    this.neurons_max = i(l, \"neurons_max\", 30);\n    this.folds = [];\n    this.candidates = [];\n    this.evaluated_candidates = [];\n    this.unique_labels = k(n);\n    this.iter = 0;\n    this.foldix = 0;\n    this.finish_fold_callback = null;\n    this.finish_batch_callback = null;\n    if (this.data.length > 0) {\n      this.sampleFolds();\n      this.sampleCandidates();\n    }\n  };\n  a.prototype = {\n    sampleFolds: function () {\n      var o = this.data.length;\n      var m = Math.floor(this.train_ratio * o);\n      this.folds = [];\n      for (var l = 0; l < this.num_folds; l++) {\n        var n = h(o);\n        this.folds.push({ train_ix: n.slice(0, m), test_ix: n.slice(m, o) });\n      }\n    },\n    sampleCandidate: function () {\n      var A = this.data[0].w.length;\n      var z = this.unique_labels.length;\n      var s = [];\n      s.push({ type: \"input\", out_sx: 1, out_sy: 1, out_depth: A });\n      var l = f([0, 1, 2, 3], [0.2, 0.3, 0.3, 0.2]);\n      for (var m = 0; m < l; m++) {\n        var n = d(this.neurons_min, this.neurons_max);\n        var v = [\"tanh\", \"maxout\", \"relu\"][d(0, 3)];\n        if (e(0, 1) < 0.5) {\n          var r = Math.random();\n          s.push({ type: \"fc\", num_neurons: n, activation: v, drop_prob: r });\n        } else {\n          s.push({ type: \"fc\", num_neurons: n, activation: v });\n        }\n      }\n      s.push({ type: \"softmax\", num_classes: z });\n      var x = new j();\n      x.makeLayers(s);\n      var C = d(this.batch_size_min, this.batch_size_max);\n      var o = Math.pow(10, e(this.l2_decay_min, this.l2_decay_max));\n      var t = Math.pow(10, e(this.learning_rate_min, this.learning_rate_max));\n      var p = e(this.momentum_min, this.momentum_max);\n      var y = e(0, 1);\n      var u;\n      if (y < 0.33) {\n        u = { method: \"adadelta\", batch_size: C, l2_decay: o };\n      } else {\n        if (y < 0.66) {\n          u = {\n            method: \"adagrad\",\n            learning_rate: t,\n            batch_size: C,\n            l2_decay: o,\n          };\n        } else {\n          u = {\n            method: \"sgd\",\n            learning_rate: t,\n            momentum: p,\n            batch_size: C,\n            l2_decay: o,\n          };\n        }\n      }\n      var B = new g(x, u);\n      var w = {};\n      w.acc = [];\n      w.accv = 0;\n      w.layer_defs = s;\n      w.trainer_def = u;\n      w.net = x;\n      w.trainer = B;\n      return w;\n    },\n    sampleCandidates: function () {\n      this.candidates = [];\n      for (var l = 0; l < this.num_candidates; l++) {\n        var m = this.sampleCandidate();\n        this.candidates.push(m);\n      }\n    },\n    step: function () {\n      this.iter++;\n      var r = this.folds[this.foldix];\n      var p = r.train_ix[d(0, r.train_ix.length)];\n      for (var q = 0; q < this.candidates.length; q++) {\n        var u = this.data[p];\n        var o = this.labels[p];\n        this.candidates[q].trainer.train(u, o);\n      }\n      var n = this.num_epochs * r.train_ix.length;\n      if (this.iter >= n) {\n        var m = this.evalValErrors();\n        for (var q = 0; q < this.candidates.length; q++) {\n          var s = this.candidates[q];\n          s.acc.push(m[q]);\n          s.accv += m[q];\n        }\n        this.iter = 0;\n        this.foldix++;\n        if (this.finish_fold_callback !== null) {\n          this.finish_fold_callback();\n        }\n        if (this.foldix >= this.folds.length) {\n          for (var q = 0; q < this.candidates.length; q++) {\n            this.evaluated_candidates.push(this.candidates[q]);\n          }\n          this.evaluated_candidates.sort(function (w, l) {\n            return w.accv / w.acc.length > l.accv / l.acc.length ? -1 : 1;\n          });\n          if (this.evaluated_candidates.length > 3 * this.ensemble_size) {\n            this.evaluated_candidates = this.evaluated_candidates.slice(\n              0,\n              3 * this.ensemble_size\n            );\n          }\n          if (this.finish_batch_callback !== null) {\n            this.finish_batch_callback();\n          }\n          this.sampleCandidates();\n          this.foldix = 0;\n        } else {\n          for (var q = 0; q < this.candidates.length; q++) {\n            var s = this.candidates[q];\n            var t = new j();\n            t.makeLayers(s.layer_defs);\n            var v = new g(t, s.trainer_def);\n            s.net = t;\n            s.trainer = v;\n          }\n        }\n      }\n    },\n    evalValErrors: function () {\n      var t = [];\n      var r = this.folds[this.foldix];\n      for (var p = 0; p < this.candidates.length; p++) {\n        var s = this.candidates[p].net;\n        var w = 0;\n        for (var m = 0; m < r.test_ix.length; m++) {\n          var u = this.data[r.test_ix[m]];\n          var o = this.labels[r.test_ix[m]];\n          s.forward(u);\n          var n = s.getPrediction();\n          w += n === o ? 1 : 0;\n        }\n        w /= r.test_ix.length;\n        t.push(w);\n      }\n      return t;\n    },\n    predict_soft: function (q) {\n      var o = [];\n      var r = 0;\n      if (this.evaluated_candidates.length === 0) {\n        r = this.candidates.length;\n        o = this.candidates;\n      } else {\n        r = Math.min(this.ensemble_size, this.evaluated_candidates.length);\n        o = this.evaluated_candidates;\n      }\n      var l, m;\n      for (var p = 0; p < r; p++) {\n        var t = o[p].net;\n        var u = t.forward(q);\n        if (p === 0) {\n          l = u;\n          m = u.w.length;\n        } else {\n          for (var s = 0; s < m; s++) {\n            l.w[s] += u.w[s];\n          }\n        }\n      }\n      for (var s = 0; s < m; s++) {\n        l.w[s] /= r;\n      }\n      return l;\n    },\n    predict: function (n) {\n      var m = this.predict_soft(n);\n      if (m.w.length !== 0) {\n        var l = b(m.w);\n        var o = l.maxi;\n      } else {\n        var o = -1;\n      }\n      return o;\n    },\n    toJSON: function () {\n      var l = Math.min(this.ensemble_size, this.evaluated_candidates.length);\n      var n = {};\n      n.nets = [];\n      for (var m = 0; m < l; m++) {\n        n.nets.push(this.evaluated_candidates[m].net.toJSON());\n      }\n      return n;\n    },\n    fromJSON: function (m) {\n      this.ensemble_size = m.nets.length;\n      this.evaluated_candidates = [];\n      for (var l = 0; l < this.ensemble_size; l++) {\n        var n = new j();\n        n.fromJSON(m.nets[l]);\n        var o = {};\n        o.net = n;\n        this.evaluated_candidates.push(o);\n      }\n    },\n    onFinishFold: function (l) {\n      this.finish_fold_callback = l;\n    },\n    onFinishBatch: function (l) {\n      this.finish_batch_callback = l;\n    },\n  };\n  c.MagicNet = a;\n})(convnetjs);\n(function (a) {\n  if (typeof module === \"undefined\" || typeof module.exports === \"undefined\") {\n    window.jsfeat = a;\n  } else {\n    module.exports = a;\n  }\n})(convnetjs);\n","import React from \"react\";\nimport \"./button.less\";\n\ntype Props = {\n  children: any;\n  onClick?: () => void;\n  disabled?: boolean;\n};\n\nexport const Button = ({ children, onClick, disabled }: Props) => {\n  return (\n    <button className=\"button\" onClick={onClick} disabled={disabled}>\n      {children}\n    </button>\n  );\n};\n","import React from \"react\";\nimport { tileCount as defaultTileCount } from \"../index\";\n\nexport const BoardContext = React.createContext({\n  containerWidth: 0,\n  tileCount: defaultTileCount,\n});\n\ntype Props = {\n  containerWidth: number;\n  tileCount: number;\n  children: any;\n};\n\nexport const BoardProvider = ({\n  children,\n  containerWidth = 0,\n  tileCount = defaultTileCount,\n}: Props) => {\n  return (\n    <BoardContext.Provider value={{ containerWidth, tileCount }}>\n      {children}\n    </BoardContext.Provider>\n  );\n};\n","import { useContext } from \"react\";\nimport { BoardContext } from \"../context/BoardContext\";\n\n/**\n * Returns the properties of the board such as tile container width or tile count.\n */\nexport const useBoard = () => {\n  const { containerWidth, tileCount } = useContext(BoardContext);\n\n  return [containerWidth, tileCount] as [number, number];\n};\n","import { pixelSize } from \"../../../styles\";\n\n/**\n * The number of tiles per row and column.\n * IMPORTANT! Check styles before changing this value!\n *\n * @constant {number}\n */\nexport const tileCount = 4;\n\n/**\n * The duration of every animation in ms.\n * IMPORTANT! Check styles before modyfing this value!\n *\n * @constant {number} ms\n */\nexport const animationDuration = 250;\n\n/**\n * The board margin (left, right, top, bottom).\n */\nexport const boardMargin = 2 * pixelSize;\n","import React from \"react\";\nimport { useBoard } from \"../Board\";\n\nimport \"./grid.less\";\n\nexport const Grid = () => {\n  const [, tileCount] = useBoard();\n\n  const renderGrid = () => {\n    const length = tileCount * tileCount;\n    const cells = [] as JSX.Element[];\n\n    for (let index = 0; index < length; index += 1) {\n      cells.push(<div key={`${index}`} className={`grid-cell`} />);\n    }\n\n    return cells;\n  };\n\n  return <div className=\"grid\">{renderGrid()}</div>;\n};\n","import React, { useEffect, useState } from \"react\";\nimport invariant from \"tiny-invariant\";\nimport { usePrevProps } from \"../../hooks/usePrevProps\";\nimport { useBoard } from \"../Board\";\nimport \"./tile.less\";\n\ntype Props = {\n  // tile value - 2, 4, 8, 16, 32, ..., 2048.\n  value: number;\n  // an array containing the x and y index on the board.\n  position: [number, number];\n  // the order of tile on the tile stack.\n  zIndex: number;\n};\n\nexport const Tile = ({ value, position, zIndex }: Props) => {\n  // retrieves board properties\n  const [containerWidth, tileCount] = useBoard();\n  //  state required to animate the highlight\n  const [scale, setScale] = useState(1);\n\n  // the previous value (prop) - it is undefined if it is a new tile.\n  const previousValue = usePrevProps<number>(value);\n\n  // check if tile is within the board boundries\n  const withinBoardBoundaries =\n    position[0] < tileCount && position[1] < tileCount;\n  invariant(withinBoardBoundaries, \"Tile out of bound\");\n\n  // if it is a new tile...\n  const isNew = previousValue === undefined;\n  // ...or its value has changed...\n  const hasChanged = previousValue !== value;\n  // ... then the tile should be highlighted.\n  const shallHighlight = isNew || hasChanged;\n\n  // useEffect will decide if highlight should be triggered.\n  useEffect(() => {\n    if (shallHighlight) {\n      setScale(1.1);\n      setTimeout(() => setScale(1), 100);\n    }\n  }, [shallHighlight, scale]);\n\n  /**\n   * Converts tile position from array index to pixels.\n   */\n  const positionToPixels = (position: number) => {\n    return (position / tileCount) * (containerWidth as number);\n  };\n\n  // all animations come from CSS transition, and we pass them as styles\n  const style = {\n    top: positionToPixels(position[1]),\n    left: positionToPixels(position[0]),\n    transform: `scale(${scale})`,\n    zIndex,\n  };\n\n  return (\n    <div className={`tile tile-${value}`} style={style}>\n      {value}\n    </div>\n  );\n};\n","import { useEffect, useRef } from \"react\";\n\n/**\n * `usePrevProps` stores the previous value of the prop.\n *\n * @link https://blog.logrocket.com/how-to-get-previous-props-state-with-react-hooks/\n * @param {K} value\n * @returns {K | undefined}\n */\nexport const usePrevProps = <K = any>(value: K) => {\n  const ref = useRef<K>();\n\n  useEffect(() => {\n    ref.current = value;\n  });\n\n  return ref.current;\n};\n","import React from \"react\";\nimport { BoardProvider } from \"./context/BoardContext\";\nimport { boardMargin, tileCount as defaultTileCount } from \"./models/Board\";\nimport { Grid } from \"../Grid\";\nimport { TileMeta, tileTotalWidth, Tile } from \"../Tile\";\nimport \"./board.less\";\n\ntype Props = {\n  tiles: TileMeta[];\n  tileCountPerRow: number;\n};\n\nexport const Board = ({ tiles, tileCountPerRow = defaultTileCount }: Props) => {\n  // container width = tile width * tile count per row\n  const containerWidth = tileTotalWidth * tileCountPerRow;\n  // board width = container width + margin\n  const boardWidth = containerWidth + boardMargin;\n\n  // render all tiles on the board\n  const tileList = tiles.map(({ id, ...restProps }) => (\n    <Tile key={`tile-${id}`} {...restProps} zIndex={id} />\n  ));\n\n  return (\n    <div className=\"board\" style={{ width: boardWidth }}>\n      <BoardProvider\n        containerWidth={containerWidth}\n        tileCount={tileCountPerRow}\n      >\n        <div className=\"tile-container\">{tileList}</div>\n        <Grid />\n      </BoardProvider>\n    </div>\n  );\n};\n","import { pixelSize } from \"../../../styles\";\n\nexport type TileMeta = {\n  id: number;\n  position: [number, number];\n  value: number;\n  mergeWith?: number;\n};\n\nconst tileMargin = 2 * pixelSize;\n\nconst tileWidthMultiplier = 12.5;\n\nconst tileWidth = tileWidthMultiplier * pixelSize;\n\nexport const tileTotalWidth = tileWidth + tileMargin;\n","let seqId = 1;\n\n/**\n * Returns next sequential number.\n */\nexport const useIds = () => {\n  const nextId = () => {\n    return seqId++;\n  };\n\n  return [nextId];\n};\n","import { TileMeta } from \"../../../Tile\";\n\ntype State = {\n  tiles: {\n    [id: number]: TileMeta;\n  };\n  inMotion: boolean;\n  hasChanged: boolean;\n  byIds: number[];\n};\n\nexport const initialState: State = {\n  tiles: {},\n  byIds: [],\n  hasChanged: false,\n  inMotion: false,\n};\n\ntype Action =\n  | { type: \"CREATE_TILE\"; tile: TileMeta }\n  | { type: \"UPDATE_TILE\"; tile: TileMeta }\n  | { type: \"MERGE_TILE\"; source: TileMeta; destination: TileMeta }\n  | { type: \"START_MOVE\" }\n  | { type: \"END_MOVE\" };\n\nexport const GameReducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case \"CREATE_TILE\":\n      return {\n        ...state,\n        tiles: {\n          ...state.tiles,\n          [action.tile.id]: action.tile,\n        },\n        byIds: [...state.byIds, action.tile.id],\n        hasChanged: false,\n      };\n    case \"UPDATE_TILE\":\n      return {\n        ...state,\n        tiles: {\n          ...state.tiles,\n          [action.tile.id]: action.tile,\n        },\n        hasChanged: true,\n      };\n    case \"MERGE_TILE\":\n      const {\n        [action.source.id]: source,\n        [action.destination.id]: destination,\n        ...restTiles\n      } = state.tiles;\n      return {\n        ...state,\n        tiles: {\n          ...restTiles,\n          [action.destination.id]: {\n            id: action.destination.id,\n            value: action.source.value + action.destination.value,\n            position: action.destination.position,\n          },\n        },\n        byIds: state.byIds.filter((id) => id !== action.source.id),\n        hasChanged: true,\n      };\n    case \"START_MOVE\":\n      return {\n        ...state,\n        inMotion: true,\n      };\n    case \"END_MOVE\":\n      return {\n        ...state,\n        inMotion: false,\n      };\n    default:\n      return state;\n  }\n};\n","import { useCallback, useEffect, useReducer, useRef } from \"react\";\nimport {\n  animationDuration,\n  tileCount as tileCountPerRowOrColumn,\n} from \"../../../Board\";\nimport { TileMeta } from \"../../../Tile\";\nimport { useIds } from \"../useIds\";\nimport { GameReducer, initialState } from \"./reducer\";\n\nexport const useGame = () => {\n  const isInitialRender = useRef(true);\n  const [nextId] = useIds();\n  // state\n  const [state, dispatch] = useReducer(GameReducer, initialState);\n  const { tiles, byIds, hasChanged, inMotion } = state;\n\n  const createTile = useCallback(\n    ({ position, value }: Partial<TileMeta>) => {\n      const tile = {\n        id: nextId(),\n        position,\n        value,\n      } as TileMeta;\n      dispatch({ type: \"CREATE_TILE\", tile });\n    },\n    [nextId]\n  );\n\n  const mergeTile = (source: TileMeta, destination: TileMeta) => {\n    dispatch({ type: \"MERGE_TILE\", source, destination });\n  };\n\n  // A must-have to keep the sliding animation if the action merges tiles together.\n  const throttledMergeTile = (source: TileMeta, destination: TileMeta) => {\n    setTimeout(() => mergeTile(source, destination), animationDuration);\n  };\n\n  const updateTile = (tile: TileMeta) => {\n    dispatch({ type: \"UPDATE_TILE\", tile });\n  };\n\n  const didTileMove = (source: TileMeta, destination: TileMeta) => {\n    const hasXChanged = source.position[0] !== destination.position[0];\n    const hasYChanged = source.position[1] !== destination.position[1];\n\n    return hasXChanged || hasYChanged;\n  };\n\n  const retrieveTileMap = useCallback(() => {\n    const tileMap = new Array(\n      tileCountPerRowOrColumn * tileCountPerRowOrColumn\n    ).fill(0) as number[];\n\n    byIds.forEach((id) => {\n      const { position } = tiles[id];\n      const index = positionToIndex(position);\n      tileMap[index] = id;\n    });\n\n    return tileMap;\n  }, [byIds, tiles]);\n\n  const findEmptyTiles = useCallback(() => {\n    const tileMap = retrieveTileMap();\n\n    const emptyTiles = tileMap.reduce((result, tileId, index) => {\n      if (tileId === 0) {\n        return [...result, indexToPosition(index) as [number, number]];\n      }\n\n      return result;\n    }, [] as [number, number][]);\n\n    return emptyTiles;\n  }, [retrieveTileMap]);\n\n  const generateRandomTile = useCallback(() => {\n    const emptyTiles = findEmptyTiles();\n\n    if (emptyTiles.length > 0) {\n      const index = Math.floor(Math.random() * emptyTiles.length);\n      const position = emptyTiles[index];\n\n      createTile({ position, value: 2 });\n    }\n  }, [findEmptyTiles, createTile]);\n\n  const positionToIndex = (position: [number, number]) => {\n    return position[1] * tileCountPerRowOrColumn + position[0];\n  };\n\n  const indexToPosition = (index: number) => {\n    const x = index % tileCountPerRowOrColumn;\n    const y = Math.floor(index / tileCountPerRowOrColumn);\n    return [x, y];\n  };\n\n  type RetrieveTileIdsPerRowOrColumn = (rowOrColumnIndex: number) => number[];\n\n  type CalculateTileIndex = (\n    tileIndex: number,\n    tileInRowIndex: number,\n    howManyMerges: number,\n    maxIndexInRow: number\n  ) => number;\n\n  const move = (\n    retrieveTileIdsPerRowOrColumn: RetrieveTileIdsPerRowOrColumn,\n    calculateFirstFreeIndex: CalculateTileIndex\n  ) => {\n    // new tiles cannot be created during motion.\n    dispatch({ type: \"START_MOVE\" });\n\n    const maxIndex = tileCountPerRowOrColumn - 1;\n\n    // iterates through every row or column (depends on move kind - vertical or horizontal).\n    for (\n      let rowOrColumnIndex = 0;\n      rowOrColumnIndex < tileCountPerRowOrColumn;\n      rowOrColumnIndex += 1\n    ) {\n      // retrieves tiles in the row or column.\n      const availableTileIds = retrieveTileIdsPerRowOrColumn(rowOrColumnIndex);\n\n      // previousTile is used to determine if tile can be merged with the current tile.\n      let previousTile: TileMeta | undefined;\n      // mergeCount helps to fill gaps created by tile merges - two tiles become one.\n      let mergedTilesCount = 0;\n\n      // interate through available tiles.\n      availableTileIds.forEach((tileId, nonEmptyTileIndex) => {\n        const currentTile = tiles[tileId];\n\n        // if previous tile has the same value as the current one they should be merged together.\n        if (\n          previousTile !== undefined &&\n          previousTile.value === currentTile.value\n        ) {\n          const tile = {\n            ...currentTile,\n            position: previousTile.position,\n            mergeWith: previousTile.id,\n          } as TileMeta;\n\n          // delays the merge by 250ms, so the sliding animation can be completed.\n          throttledMergeTile(tile, previousTile);\n          // previous tile must be cleared as a single tile can be merged only once per move.\n          previousTile = undefined;\n          // increment the merged counter to correct position for the consecutive tiles to get rid of gaps\n          mergedTilesCount += 1;\n\n          return updateTile(tile);\n        }\n\n        // else - previous and current tiles are different - move the tile to the first free space.\n        const tile = {\n          ...currentTile,\n          position: indexToPosition(\n            calculateFirstFreeIndex(\n              rowOrColumnIndex,\n              nonEmptyTileIndex,\n              mergedTilesCount,\n              maxIndex\n            )\n          ),\n        } as TileMeta;\n\n        // previous tile become the current tile to check if the next tile can be merged with this one.\n        previousTile = tile;\n\n        // only if tile has changed its position it will be updated\n        if (didTileMove(currentTile, tile)) {\n          return updateTile(tile);\n        }\n      });\n    }\n\n    // wait until the end of all animations.\n    setTimeout(() => dispatch({ type: \"END_MOVE\" }), animationDuration);\n  };\n\n  const moveLeftFactory = () => {\n    const retrieveTileIdsByRow = (rowIndex: number) => {\n      const tileMap = retrieveTileMap();\n\n      const tileIdsInRow = [\n        tileMap[rowIndex * tileCountPerRowOrColumn + 0],\n        tileMap[rowIndex * tileCountPerRowOrColumn + 1],\n        tileMap[rowIndex * tileCountPerRowOrColumn + 2],\n        tileMap[rowIndex * tileCountPerRowOrColumn + 3],\n      ];\n\n      const nonEmptyTiles = tileIdsInRow.filter((id) => id !== 0);\n      return nonEmptyTiles;\n    };\n\n    const calculateFirstFreeIndex = (\n      tileIndex: number,\n      tileInRowIndex: number,\n      howManyMerges: number,\n      _: number\n    ) => {\n      return (\n        tileIndex * tileCountPerRowOrColumn + tileInRowIndex - howManyMerges\n      );\n    };\n\n    return move.bind(this, retrieveTileIdsByRow, calculateFirstFreeIndex);\n  };\n\n  const moveRightFactory = () => {\n    const retrieveTileIdsByRow = (rowIndex: number) => {\n      const tileMap = retrieveTileMap();\n\n      const tileIdsInRow = [\n        tileMap[rowIndex * tileCountPerRowOrColumn + 0],\n        tileMap[rowIndex * tileCountPerRowOrColumn + 1],\n        tileMap[rowIndex * tileCountPerRowOrColumn + 2],\n        tileMap[rowIndex * tileCountPerRowOrColumn + 3],\n      ];\n\n      const nonEmptyTiles = tileIdsInRow.filter((id) => id !== 0);\n      return nonEmptyTiles.reverse();\n    };\n\n    const calculateFirstFreeIndex = (\n      tileIndex: number,\n      tileInRowIndex: number,\n      howManyMerges: number,\n      maxIndexInRow: number\n    ) => {\n      return (\n        tileIndex * tileCountPerRowOrColumn +\n        maxIndexInRow +\n        howManyMerges -\n        tileInRowIndex\n      );\n    };\n\n    return move.bind(this, retrieveTileIdsByRow, calculateFirstFreeIndex);\n  };\n\n  const moveUpFactory = () => {\n    const retrieveTileIdsByColumn = (columnIndex: number) => {\n      const tileMap = retrieveTileMap();\n\n      const tileIdsInColumn = [\n        tileMap[columnIndex + tileCountPerRowOrColumn * 0],\n        tileMap[columnIndex + tileCountPerRowOrColumn * 1],\n        tileMap[columnIndex + tileCountPerRowOrColumn * 2],\n        tileMap[columnIndex + tileCountPerRowOrColumn * 3],\n      ];\n\n      const nonEmptyTiles = tileIdsInColumn.filter((id) => id !== 0);\n      return nonEmptyTiles;\n    };\n\n    const calculateFirstFreeIndex = (\n      tileIndex: number,\n      tileInColumnIndex: number,\n      howManyMerges: number,\n      _: number\n    ) => {\n      return (\n        tileIndex +\n        tileCountPerRowOrColumn * (tileInColumnIndex - howManyMerges)\n      );\n    };\n\n    return move.bind(this, retrieveTileIdsByColumn, calculateFirstFreeIndex);\n  };\n\n  const moveDownFactory = () => {\n    const retrieveTileIdsByColumn = (columnIndex: number) => {\n      const tileMap = retrieveTileMap();\n\n      const tileIdsInColumn = [\n        tileMap[columnIndex + tileCountPerRowOrColumn * 0],\n        tileMap[columnIndex + tileCountPerRowOrColumn * 1],\n        tileMap[columnIndex + tileCountPerRowOrColumn * 2],\n        tileMap[columnIndex + tileCountPerRowOrColumn * 3],\n      ];\n\n      const nonEmptyTiles = tileIdsInColumn.filter((id) => id !== 0);\n      return nonEmptyTiles.reverse();\n    };\n\n    const calculateFirstFreeIndex = (\n      tileIndex: number,\n      tileInColumnIndex: number,\n      howManyMerges: number,\n      maxIndexInColumn: number\n    ) => {\n      return (\n        tileIndex +\n        tileCountPerRowOrColumn *\n          (maxIndexInColumn - tileInColumnIndex + howManyMerges)\n      );\n    };\n\n    return move.bind(this, retrieveTileIdsByColumn, calculateFirstFreeIndex);\n  };\n\n  useEffect(() => {\n    if (isInitialRender.current) {\n      createTile({ position: [0, 1], value: 2 });\n      createTile({ position: [0, 2], value: 2 });\n      isInitialRender.current = false;\n      return;\n    }\n\n    if (!inMotion && hasChanged) {\n      generateRandomTile();\n    }\n  }, [hasChanged, inMotion, createTile, generateRandomTile]);\n\n  const tileList = byIds.map((tileId) => tiles[tileId]);\n\n  const moveLeft = moveLeftFactory();\n  const moveRight = moveRightFactory();\n  const moveUp = moveUpFactory();\n  const moveDown = moveDownFactory();\n\n  return [tileList, moveLeft, moveRight, moveUp, moveDown, inMotion] as [\n    TileMeta[],\n    () => void,\n    () => void,\n    () => void,\n    () => void,\n    boolean\n  ];\n};\n","/* eslint-disable */\nimport { convnetjs, floatArray } from \"./convnet-min\";\n\nvar layer_defs = [];\nlayer_defs.push({ type: \"input\", out_sx: 4, out_sy: 4, out_depth: 16 });\nvar net_params = [256, 2400, 1600, 800, 400, 400, 200, 200, 100, 100, 4];\nfor (var i = 1; i < net_params.length - 1; i++) {\n  layer_defs.push({\n    type: \"fc\",\n    num_neurons: net_params[i],\n    activation: \"relu\",\n  });\n}\nlayer_defs.push({ type: \"fc\", num_neurons: 4 });\n\nvar net = new convnetjs.Net();\nnet.makeLayers(layer_defs);\n\n// (function () {\n//   document.getElementById(\"ai-info\").innerHTML =\n//     \"Downloading model......(about 25M). <br /><strong>NN AI won't work until the model is loaded</strong><div class='progress-container'><div class='progressbar' id='progressbar' style='width: 0%'></div></div>\";\nvar oReq = new XMLHttpRequest();\noReq.open(\"GET\", \"https://lucetre.github.io/2048/NN/model.bin\", true);\noReq.responseType = \"arraybuffer\";\n//   var updateProgress = function (oEvent) {\n//     var pb = document.getElementById(\"progressbar\");\n//     pb.innerHTML = \"\" + oEvent.loaded + \"/25484016\";\n//     var width = (100 * oEvent.loaded) / 25484016;\n//     pb.style.width = width + \"%\";\n//   };\n// oReq.addEventListener(\"progress\", updateProgress, false);\n\noReq.onload = function (oEvent) {\n  // console.log(oEvent);\n  var arrayBuffer = oReq.response; // Note: not oReq.responseText\n  if (arrayBuffer) {\n    // console.log(arrayBuffer);\n    let floatArray = new Float32Array(arrayBuffer);\n    var ptr = 0 | 0;\n    for (var i = 1; i < net_params.length; i++) {\n      var l = i * 2 - 1;\n      for (var x = 0; x < net_params[i - 1]; x++) {\n        for (var y = 0; y < net_params[i]; y++) {\n          net.layers[l].filters[y].w[x] = floatArray[ptr];\n          ptr++;\n        }\n      }\n      for (var y = 0; y < net_params[i]; y++) {\n        net.layers[l].biases.w[y] = floatArray[ptr];\n        ptr++;\n      }\n    }\n  }\n  // document.getElementById(\"ai-info\").innerHTML =\n  //   \"Model downloaded. Enjoy the neural network AI!\";\n};\noReq.send(null);\n// })();\n\nexport class AI {\n  constructor(grid) {\n    this.grid = grid;\n    this.v = new convnetjs.Vol(4, 4, 16, 0.0);\n  }\n\n  makeInput() {\n    this.v.setConst(0.0);\n    for (var i = 0; i < 4; i++) {\n      for (var j = 0; j < 4; j++) {\n        if (this.grid.cells[j][i] !== null) {\n          var v = this.grid.cells[j][i].value | 0;\n          var k = 0;\n          while (v > 2) {\n            v >>= 1;\n            k += 1;\n          }\n          this.v.w[i * 4 * 16 + j * 16 + k] = 1;\n        }\n      }\n    }\n  }\n\n  getBest() {\n    this.makeInput();\n    var p = net.forward(this.v).w;\n    var m = [0, 1, 2, 3];\n    m.sort(function (i, j) {\n      return p[j] - p[i];\n    });\n    m = m.map(function (x) {\n      return (x + 3) % 4;\n    });\n    return { move: m[0], moves: m };\n  }\n\n  translate(move) {\n    return {\n      0: \"Up \",\n      1: \"Right \",\n      2: \"Down \",\n      3: \"Left \",\n    }[move];\n  }\n}\n","/* eslint-disable */\nexport class Tile {\n  constructor(position, value) {\n    this.x = position.x;\n    this.y = position.y;\n    this.value = value || 2;\n\n    this.previousPosition = null;\n    this.mergedFrom = null; // Tracks tiles that merged together\n  }\n  savePosition() {\n    this.previousPosition = { x: this.x, y: this.y };\n  }\n  updatePosition(position) {\n    this.x = position.x;\n    this.y = position.y;\n  }\n  clone() {\n    let newTile = new Tile({ x: this.x, y: this.y }, this.value);\n    //newTile.previousPosition = { x: this.previousPosition.x, y: this.previousPosition.y };\n    //newTile.mergedFrom = { x: this.previousPosition.x, y: this.previousPosition.y };\n    return newTile;\n  }\n}\n","/* eslint-disable */\nimport { Tile } from \"./tile\";\n\nexport class Grid {\n  constructor(size) {\n    this.size = size;\n    this.startTiles = 2;\n    this.cells = [];\n    this.build();\n    this.playerTurn = true;\n  }\n\n  build() {\n    for (var x = 0; x < this.size; x++) {\n      var row = (this.cells[x] = []);\n\n      for (var y = 0; y < this.size; y++) {\n        row.push(null);\n      }\n    }\n  }\n\n  randomAvailableCell() {\n    var cells = this.availableCells();\n\n    if (cells.length) {\n      return cells[Math.floor(Math.random() * cells.length)];\n    }\n  }\n  availableCells() {\n    var cells = [];\n    var self = this;\n\n    this.eachCell(function (x, y, tile) {\n      if (!tile) {\n        cells.push({ x: x, y: y });\n      }\n    });\n\n    return cells;\n  }\n\n  eachCell(callback) {\n    for (var x = 0; x < this.size; x++) {\n      for (var y = 0; y < this.size; y++) {\n        callback(x, y, this.cells[x][y]);\n      }\n    }\n  }\n\n  cellsAvailable() {\n    return !!this.availableCells().length;\n  }\n\n  cellAvailable(cell) {\n    return !this.cellOccupied(cell);\n  }\n\n  cellOccupied(cell) {\n    return !!this.cellContent(cell);\n  }\n\n  cellContent(cell) {\n    if (this.withinBounds(cell)) {\n      return this.cells[cell.x][cell.y];\n    } else {\n      return null;\n    }\n  }\n\n  insertTile(tile) {\n    this.cells[tile.x][tile.y] = tile;\n  }\n\n  removeTile(tile) {\n    this.cells[tile.x][tile.y] = null;\n  }\n\n  withinBounds(position) {\n    return (\n      position.x >= 0 &&\n      position.x < this.size &&\n      position.y >= 0 &&\n      position.y < this.size\n    );\n  }\n\n  clone() {\n    var newGrid = new Grid(this.size);\n    newGrid.playerTurn = this.playerTurn;\n    for (var x = 0; x < this.size; x++) {\n      for (var y = 0; y < this.size; y++) {\n        if (this.cells[x][y]) {\n          newGrid.insertTile(this.cells[x][y].clone());\n        }\n      }\n    }\n    return newGrid;\n  }\n\n  addStartTiles() {\n    for (var i = 0; i < this.startTiles; i++) {\n      this.addRandomTile();\n    }\n  }\n\n  addRandomTile() {\n    if (this.cellsAvailable()) {\n      var value = Math.random() < 0.9 ? 2 : 4;\n      var tile = new Tile(this.randomAvailableCell(), value);\n\n      this.insertTile(tile);\n    }\n  }\n\n  prepareTiles() {\n    this.eachCell(function (x, y, tile) {\n      if (tile) {\n        tile.mergedFrom = null;\n        tile.savePosition();\n      }\n    });\n  }\n\n  moveTile(tile, cell) {\n    this.cells[tile.x][tile.y] = null;\n    this.cells[cell.x][cell.y] = tile;\n    tile.updatePosition(cell);\n  }\n\n  getVector(direction) {\n    // Vectors representing tile movement\n    return this.vectors[direction];\n  }\n\n  move(direction) {\n    // 0: up, 1: right, 2:down, 3: left\n    var self = this;\n    var cell, tile;\n\n    var vector = this.getVector(direction);\n    var traversals = this.buildTraversals(vector);\n    var moved = false;\n    var score = 0;\n    var won = false;\n\n    // Save the current tile positions and remove merger information\n    this.prepareTiles();\n\n    // Traverse the grid in the right direction and move tiles\n    traversals.x.forEach(function (x) {\n      traversals.y.forEach(function (y) {\n        cell = self.indexes[x][y];\n        tile = self.cellContent(cell);\n\n        if (tile) {\n          //if (debug) {\n          //console.log('tile @', x, y);\n          //}\n          var positions = self.findFarthestPosition(cell, vector);\n          var next = self.cellContent(positions.next);\n\n          // Only one merger per row traversal?\n          if (next && next.value === tile.value && !next.mergedFrom) {\n            var merged = new Tile(positions.next, tile.value * 2);\n            merged.mergedFrom = [tile, next];\n\n            self.insertTile(merged);\n            self.removeTile(tile);\n\n            // Converge the two tiles' positions\n            tile.updatePosition(positions.next);\n\n            // Update the score\n            score += merged.value;\n\n            // The mighty 2048 tile\n            if (merged.value === 2048) {\n              //won = true;\n            }\n          } else {\n            //if (debug) {\n            //console.log(cell);\n            //console.log(tile);\n            //}\n            self.moveTile(tile, positions.farthest);\n          }\n\n          if (!self.positionsEqual(cell, tile)) {\n            self.playerTurn = false;\n            //console.log('setting player turn to ', self.playerTurn);\n            moved = true; // The tile moved from its original cell!\n          }\n        }\n      });\n    });\n\n    return { moved: moved, score: score, won: won };\n  }\n  computerMove() {\n    this.addRandomTile();\n    this.playerTurn = true;\n  }\n\n  buildTraversals(vector) {\n    var traversals = { x: [], y: [] };\n\n    for (var pos = 0; pos < this.size; pos++) {\n      traversals.x.push(pos);\n      traversals.y.push(pos);\n    }\n\n    if (vector.x === 1) traversals.x = traversals.x.reverse();\n    if (vector.y === 1) traversals.y = traversals.y.reverse();\n\n    return traversals;\n  }\n\n  findFarthestPosition(cell, vector) {\n    var previous;\n\n    // Progress towards the vector direction until an obstacle is found\n    do {\n      previous = cell;\n      cell = { x: previous.x + vector.x, y: previous.y + vector.y };\n    } while (this.withinBounds(cell) && this.cellAvailable(cell));\n\n    return {\n      farthest: previous,\n      next: cell, // Used to check if a merge is required\n    };\n  }\n  movesAvailable() {\n    return this.cellsAvailable() || this.tileMatchesAvailable();\n  }\n  // Check for available matches between tiles (more expensive check)\n  // returns the number of matches\n  tileMatchesAvailable() {\n    var self = this;\n\n    //var matches = 0;\n    var tile;\n\n    for (var x = 0; x < this.size; x++) {\n      for (var y = 0; y < this.size; y++) {\n        tile = this.cellContent({ x: x, y: y });\n\n        if (tile) {\n          for (var direction = 0; direction < 4; direction++) {\n            var vector = self.getVector(direction);\n            var cell = { x: x + vector.x, y: y + vector.y };\n\n            var other = self.cellContent(cell);\n\n            if (other && other.value === tile.value) {\n              return true; //matches++; // These two tiles can be merged\n            }\n          }\n        }\n      }\n    }\n\n    //console.log(matches);\n    return false; //matches;\n  }\n  positionsEqual(first, second) {\n    return first.x === second.x && first.y === second.y;\n  }\n  toString() {\n    let string = \"\";\n    for (var i = 0; i < 4; i++) {\n      for (var j = 0; j < 4; j++) {\n        if (this.cells[j][i]) {\n          string += this.cells[j][i].value + \" \";\n        } else {\n          string += \"_ \";\n        }\n      }\n      string += \"\\n\";\n    }\n    return string;\n  }\n  // counts the number of isolated groups.\n  islands() {\n    var self = this;\n    var mark = function (x, y, value) {\n      if (\n        x >= 0 &&\n        x <= 3 &&\n        y >= 0 &&\n        y <= 3 &&\n        self.cells[x][y] &&\n        self.cells[x][y].value == value &&\n        !self.cells[x][y].marked\n      ) {\n        self.cells[x][y].marked = true;\n\n        for (let direction in [0, 1, 2, 3]) {\n          var vector = self.getVector(direction);\n          mark(x + vector.x, y + vector.y, value);\n        }\n      }\n    };\n\n    var islands = 0;\n\n    for (var x = 0; x < 4; x++) {\n      for (var y = 0; y < 4; y++) {\n        if (this.cells[x][y]) {\n          this.cells[x][y].marked = false;\n        }\n      }\n    }\n    for (var x = 0; x < 4; x++) {\n      for (var y = 0; y < 4; y++) {\n        if (this.cells[x][y] && !this.cells[x][y].marked) {\n          islands++;\n          mark(x, y, this.cells[x][y].value);\n        }\n      }\n    }\n\n    return islands;\n  }\n  // measures how smooth the grid is (as if the values of the pieces\n  // were interpreted as elevations). Sums of the pairwise difference\n  // between neighboring tiles (in log space, so it represents the\n  // number of merges that need to happen before they can merge).\n  // Note that the pieces can be distant\n  smoothness() {\n    var smoothness = 0;\n    for (var x = 0; x < 4; x++) {\n      for (var y = 0; y < 4; y++) {\n        if (this.cellOccupied(this.indexes[x][y])) {\n          var value =\n            Math.log(this.cellContent(this.indexes[x][y]).value) / Math.log(2);\n          for (var direction = 1; direction <= 2; direction++) {\n            var vector = this.getVector(direction);\n            var targetCell = this.findFarthestPosition(\n              this.indexes[x][y],\n              vector\n            ).next;\n\n            if (this.cellOccupied(targetCell)) {\n              var target = this.cellContent(targetCell);\n              var targetValue = Math.log(target.value) / Math.log(2);\n              smoothness -= Math.abs(value - targetValue);\n            }\n          }\n        }\n      }\n    }\n    return smoothness;\n  }\n  monotonicity() {\n    var self = this;\n    var marked = [];\n    var queued = [];\n    var highestValue = 0;\n    var highestCell = { x: 0, y: 0 };\n    for (var x = 0; x < 4; x++) {\n      marked.push([]);\n      queued.push([]);\n      for (var y = 0; y < 4; y++) {\n        marked[x].push(false);\n        queued[x].push(false);\n        if (this.cells[x][y] && this.cells[x][y].value > highestValue) {\n          highestValue = this.cells[x][y].value;\n          highestCell.x = x;\n          highestCell.y = y;\n        }\n      }\n    }\n\n    let increases = 0;\n    let cellQueue = [highestCell];\n    queued[highestCell.x][highestCell.y] = true;\n    let markList = [highestCell];\n    let markAfter = 1; // only mark after all queued moves are done, as if searching in parallel\n\n    var markAndScore = function (cell) {\n      markList.push(cell);\n      var value;\n      if (self.cellOccupied(cell)) {\n        value = Math.log(self.cellContent(cell).value) / Math.log(2);\n      } else {\n        value = 0;\n      }\n      for (let direction in [0, 1, 2, 3]) {\n        var vector = self.getVector(direction);\n        var target = { x: cell.x + vector.x, y: cell.y + vector.y };\n        if (self.withinBounds(target) && !marked[target.x][target.y]) {\n          if (self.cellOccupied(target)) {\n            let targetValue =\n              Math.log(self.cellContent(target).value) / Math.log(2);\n            if (targetValue > value) {\n              //console.log(cell, value, target, targetValue);\n              increases += targetValue - value;\n            }\n          }\n          if (!queued[target.x][target.y]) {\n            cellQueue.push(target);\n            queued[target.x][target.y] = true;\n          }\n        }\n      }\n      if (markAfter == 0) {\n        while (markList.length > 0) {\n          var cel = markList.pop();\n          marked[cel.x][cel.y] = true;\n        }\n        markAfter = cellQueue.length;\n      }\n    };\n\n    while (cellQueue.length > 0) {\n      markAfter--;\n      markAndScore(cellQueue.shift());\n    }\n\n    return -increases;\n  }\n  // measures how monotonic the grid is. This means the values of the tiles are strictly increasing\n  // or decreasing in both the left/right and up/down directions\n  monotonicity2() {\n    // scores for all four directions\n    var totals = [0, 0, 0, 0];\n\n    // up/down direction\n    for (var x = 0; x < 4; x++) {\n      var current = 0;\n      var next = current + 1;\n      while (next < 4) {\n        while (next < 4 && !this.cellOccupied(this.indexes[x][next])) {\n          next++;\n        }\n        if (next >= 4) {\n          next--;\n        }\n        var currentValue = this.cellOccupied({ x: x, y: current })\n          ? Math.log(this.cellContent(this.indexes[x][current]).value) /\n            Math.log(2)\n          : 0;\n        var nextValue = this.cellOccupied({ x: x, y: next })\n          ? Math.log(this.cellContent(this.indexes[x][next]).value) /\n            Math.log(2)\n          : 0;\n        if (currentValue > nextValue) {\n          totals[0] += nextValue - currentValue;\n        } else if (nextValue > currentValue) {\n          totals[1] += currentValue - nextValue;\n        }\n        current = next;\n        next++;\n      }\n    }\n\n    // left/right direction\n    for (var y = 0; y < 4; y++) {\n      var current = 0;\n      var next = current + 1;\n      while (next < 4) {\n        while (next < 4 && !this.cellOccupied(this.indexes[next][y])) {\n          next++;\n        }\n        if (next >= 4) {\n          next--;\n        }\n        var currentValue = this.cellOccupied({ x: current, y: y })\n          ? Math.log(this.cellContent(this.indexes[current][y]).value) /\n            Math.log(2)\n          : 0;\n        var nextValue = this.cellOccupied({ x: next, y: y })\n          ? Math.log(this.cellContent(this.indexes[next][y]).value) /\n            Math.log(2)\n          : 0;\n        if (currentValue > nextValue) {\n          totals[2] += nextValue - currentValue;\n        } else if (nextValue > currentValue) {\n          totals[3] += currentValue - nextValue;\n        }\n        current = next;\n        next++;\n      }\n    }\n\n    return Math.max(totals[0], totals[1]) + Math.max(totals[2], totals[3]);\n  }\n  maxValue() {\n    var max = 0;\n    for (var x = 0; x < 4; x++) {\n      for (var y = 0; y < 4; y++) {\n        if (this.cellOccupied(this.indexes[x][y])) {\n          var value = this.cellContent(this.indexes[x][y]).value;\n          if (value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n\n    return Math.log(max) / Math.log(2);\n  }\n  // WIP. trying to favor top-heavy distributions (force consolidation of higher value tiles)\n  /*\n  Grid.prototype.valueSum = function() {\n    var valueCount = [];\n    for (var i=0; i<11; i++) {\n      valueCount.push(0);\n    }\n  \n    for (var x=0; x<4; x++) {\n      for (var y=0; y<4; y++) {\n        if (this.cellOccupied(this.indexes[x][y])) {\n          valueCount[Math.log(this.cellContent(this.indexes[x][y]).value) / Math.log(2)]++;\n        }\n      }\n    }\n  \n    var sum = 0;\n    for (var i=1; i<11; i++) {\n      sum += valueCount[i] * Math.pow(2, i) + i;\n    }\n  \n    return sum;\n  }\n  */\n  // check for win\n  isWin() {\n    var self = this;\n    for (var x = 0; x < 4; x++) {\n      for (var y = 0; y < 4; y++) {\n        if (self.cellOccupied(this.indexes[x][y])) {\n          if (self.cellContent(this.indexes[x][y]).value == 2048) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n}\n\n// pre-allocate these objects (for speed)\nGrid.prototype.indexes = [];\nfor (var x = 0; x < 4; x++) {\n  Grid.prototype.indexes.push([]);\n  for (var y = 0; y < 4; y++) {\n    Grid.prototype.indexes[x].push({ x: x, y: y });\n  }\n}\n\nGrid.prototype.vectors = {\n  0: { x: 0, y: -1 }, // up\n  1: { x: 1, y: 0 }, // right\n  2: { x: 0, y: 1 }, // down\n  3: { x: -1, y: 0 }, // left\n};\n\n//Grid.prototype.zobristTable = {}\n//for\n//Grid.prototype.hash = function() {\n//}\n","import { AI } from \"./ai\";\nimport { Grid } from \"./grid\";\nimport { Tile } from \"./tile\";\n\nconst GRID_SIZE = 4;\n\nexport class Helper {\n  constructor(tiles) {\n    this.grid = this.encode(tiles);\n    this.ai = new AI(this.grid);\n  }\n\n  think() {\n    this.decode(this.grid);\n    const best = this.ai.getBest();\n    return this.ai.translate(best.move);\n  }\n\n  move(direction) {\n    this.grid.move(direction);\n  }\n\n  decode(grid) {\n    var cells = grid.cells.map((row) =>\n      row.map((cell) => {\n        if (!cell) return 0;\n        return cell.value;\n      })\n    );\n    cells = cells[0].map((_, colIndex) => cells.map((row) => row[colIndex]));\n    // console.log(cells);\n  }\n\n  encode(tiles) {\n    let newGrid = new Grid(GRID_SIZE);\n    for (let { position, value } of tiles) {\n      const [x, y] = position;\n      newGrid.cells[x][y] = new Tile({ x, y }, value);\n    }\n    return newGrid;\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useThrottledCallback } from \"use-debounce\";\n\nimport { useGame } from \"./hooks/useGame\";\nimport { Helper } from \"../../services/helper\";\nimport { Board, animationDuration, tileCount } from \"../Board\";\nimport { useSwipeable } from \"react-swipeable\";\n\nexport const Game = ({ think, setThink, hintAct, setHintAct, setDisabled }: any) => {\n  const [tiles, moveLeft, moveRight, moveUp, moveDown, inMotion] = useGame();\n  const [tileCnt, setTileCnt] = useState(0);\n  const [hintMode, setHintMode] = useState(false);\n\n  useEffect(() => {\n    setDisabled(inMotion);\n  }, [inMotion, setDisabled]);\n\n  useEffect(() => {\n    if (hintAct) {\n      switch (think) {\n        case \"Up \":\n          moveUp();\n          break;\n        case \"Right \":\n          moveRight();\n          break;\n        case \"Down \":\n          moveDown();\n          break;\n        case \"Left \":\n          moveLeft();\n          break;\n      }\n      setHintAct(false);\n    }\n  }, [hintAct, setHintAct, think, moveUp, moveRight, moveDown, moveLeft]);\n\n  useEffect(() => {\n    if (setThink) {\n      setHintMode(true);\n      setTileCnt(tiles.length - 1);\n    }\n    if (hintMode) {\n      // console.log(tiles.length, tileCnt);\n      if (tiles.length === tileCnt + 1) {\n        // console.log(\"guess\");\n        const bestMove = new Helper(tiles).think();\n        setThink(bestMove);\n      }\n      setTileCnt(tiles.length);\n    }\n  }, [tiles, setThink, tileCnt, hintMode]);\n\n  const handlers = useSwipeable({\n    onSwipedLeft: moveLeft,\n    onSwipedRight: moveRight,\n    onSwipedUp: moveUp,\n    onSwipedDown: moveDown,\n    preventScrollOnSwipe: true,\n    trackMouse: true,\n  });\n\n  const handleKeyDown = (e: KeyboardEvent) => {\n    // disables page scrolling with keyboard arrows\n    e.preventDefault();\n\n    switch (e.code) {\n      case \"ArrowLeft\":\n        moveLeft();\n        break;\n      case \"ArrowRight\":\n        moveRight();\n        break;\n      case \"ArrowUp\":\n        moveUp();\n        break;\n      case \"ArrowDown\":\n        moveDown();\n        break;\n    }\n  };\n\n  // protects the reducer from being flooded with events.\n  const throttledHandleKeyDown = useThrottledCallback(\n    handleKeyDown,\n    animationDuration,\n    { leading: true, trailing: false }\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", throttledHandleKeyDown);\n\n    return () => {\n      window.removeEventListener(\"keydown\", throttledHandleKeyDown);\n    };\n  }, [throttledHandleKeyDown]);\n\n  return (\n    <>\n      <div className=\"touch-area\" {...handlers} />\n      {/* <img src={process.env.PUBLIC_URL + \"/arrow-up.gif\"} alt=\"up\" /> */}\n      <Board tiles={tiles} tileCountPerRow={tileCount} />\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Button } from \"./components/Button\";\nimport { Game } from \"./components/Game\";\n\nimport \"./App.less\";\n\n/* eslint-disable react/jsx-no-target-blank */\nexport const App = () => {\n  const [date, setDate] = useState<Date>(new Date());\n  const [think, setThink] = useState<string>(\"Think\");\n  const [hintAct, setHintAct] = useState<boolean>(false);\n  const [disabled, setDisabled] = useState<boolean>(false);\n\n  const handleThink = () => {\n    alert(\"Let me give you some hints!\");\n    setThink(\"\");\n  };\n\n  const handleHint = () => {\n    setHintAct(true);\n  };\n\n  const handleReset = () => {\n    setDate(new Date());\n    setThink(\"Think\");\n    setHintAct(false);\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"header\">\n        <div>\n          <h1>2048-NN</h1>\n        </div>\n        <div className=\"button-area\">\n          <Button onClick={think === \"Think\" ? handleThink : handleHint} disabled={disabled}>\n            {think}\n          </Button>\n        </div>\n        <div className=\"button-area\">\n          <Button onClick={handleReset}>Reset</Button>\n        </div>\n      </div>\n      <Game\n        key={date.toISOString()}\n        think={think}\n        setThink={think === \"Think\" ? null : setThink}\n        hintAct={hintAct}\n        setHintAct={setHintAct}\n        setDisabled={setDisabled}\n      />\n    </div>\n  );\n};\n/* eslint-enable react/jsx-no-target-blank */\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}